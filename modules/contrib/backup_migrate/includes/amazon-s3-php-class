<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<title>Amazon S3 PHP Class | Undesigned</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="http://undesigned.org.za/wp-content/themes/undesigned/style.css" />
<link rel="pingback" href="http://undesigned.org.za/xmlrpc.php" />
<meta name="google-site-verification" content="DndzMeCf9zKkRmCx1TY6TWOsQpCvkvPosOxxY5YNdLM" />
<link rel="alternate" type="application/rss+xml" title="Undesigned &raquo; Feed" href="http://undesigned.org.za/feed/" />
<link rel="alternate" type="application/rss+xml" title="Undesigned &raquo; Comments Feed" href="http://undesigned.org.za/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Undesigned &raquo; Amazon S3 PHP Class Comments Feed" href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/feed/" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://undesigned.org.za/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://undesigned.org.za/wp-includes/wlwmanifest.xml" /> 
<link rel='next' title='Nullmailer, a developer&#8217;s best friend' href='http://undesigned.org.za/2007/11/22/nullmailer-a-developers-best-friend/' />
<meta name="generator" content="WordPress 4.1.1" />
<link rel='canonical' href='http://undesigned.org.za/2007/10/22/amazon-s3-php-class/' />
<link rel='shortlink' href='http://undesigned.org.za/?p=4' />
<!--
	generated in 1.025 seconds
	399314 bytes batcached for 300 seconds
-->
</head>

<body class="single single-post postid-4 single-format-standard">
<div id="wrapper" class="hfeed">
	<div id="header">
		<div id="masthead">
			<div id="branding" role="banner">
								<div id="site-title">
					<span>
						<a href="http://undesigned.org.za/" title="Undesigned" rel="home">Undesigned</a>
					</span>
				</div>
				<div id="site-description">Freelance web / mobile application developer, Cape Town, South Africa</div>

							</div><!-- #branding -->

			<div id="access" role="navigation">
			  				<div class="skip-link screen-reader-text"><a href="#content" title="Skip to content">Skip to content</a></div>
								<div class="menu-header"><ul id="menu-main-navigation" class="menu"><li id="menu-item-138" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-138"><a href="/">Home</a></li>
<li id="menu-item-139" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-has-children menu-item-139"><a href="/2007/10/22/amazon-s3-php-class">Amazon S3 PHP Class</a>
<ul class="sub-menu">
	<li id="menu-item-140" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-140"><a href="/2007/10/22/amazon-s3-php-class/documentation">Class Documentation</a></li>
	<li id="menu-item-141" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-141"><a href="https://github.com/tpyo/amazon-s3-php-class">GitHub Repository</a></li>
</ul>
</li>
<li id="menu-item-137" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-137"><a href="http://undesigned.org.za/about/">About</a></li>
<li id="menu-item-136" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-136"><a href="http://undesigned.org.za/contact/">Contact</a></li>
</ul></div>			</div><!-- #access -->
		</div><!-- #masthead -->
	</div><!-- #header -->

	<div id="main">

		<div id="container">
			<div id="content" role="main">

			

				<div id="nav-above" class="navigation">
					<div class="nav-previous"></div>
					<div class="nav-next"><a href="http://undesigned.org.za/2007/11/22/nullmailer-a-developers-best-friend/" rel="next">Nullmailer, a developer&#8217;s best friend <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-above -->

				<div id="post-4" class="post-4 post type-post status-publish format-standard hentry category-uncategorized tag-amazon-s3 tag-php">
					<h1 class="entry-title">Amazon S3 PHP Class</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted on</span> <a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/" title="4:52 AM" rel="bookmark"><span class="entry-date">October 22, 2007</span></a> <span class="meta-sep">by</span> <span class="author vcard"><a class="url fn n" href="http://undesigned.org.za/author/admin/" title="View all posts by don">don</a></span>					</div><!-- .entry-meta -->

					<div class="entry-content">
						<p>This class is a standalone <a href="http://aws.amazon.com/s3">Amazon S3</a> REST implementation for PHP 5.2.x (using <a href="http://php.net/curl">CURL</a>), that supports large file uploads and doesn&#8217;t require PEAR.</p>
<p><strong>Download source:</strong> (<a rel="external" href="https://github.com/tpyo/amazon-s3-php-class/commits/master">view changelog</a>)</p>
<ul>
<li><a href="https://github.com/tpyo/amazon-s3-php-class/tarball/master">Download latest development version</a> (0.5.x &#8211; recommended)</li>
<li><a href="http://amazon-s3-php-class.googlecode.com/files/s3-php5-curl_0.4.0.tar.gz">Download old stable version</a> (0.4.0 &#8211; 20th Jul 2009)</li>
</ul>
<p><strong>Usage: </strong><span style="color: #000000">See the <a href="/2007/10/22/amazon-s3-php-class/documentation">class documentation</a> and example.php in the source distribution.</span></p>
<p><strong>Known Issues:</strong></p>
<ul>
<li>Files larger than 2GB are not supported on 32 bit systems due to <a href="http://bugs.php.net/bug.php?id=27792">PHP&#8217;s signed integer problem</a></li>
<li>SSL is enabled by default and can cause problems with large files.  If you don&#8217;t need SSL, disable it with S3::$useSSL = false;</li>
</ul>
<p><strong>More Information:</strong></p>
<ul>
<li><a href="http://docs.amazonwebservices.com/AmazonS3/2006-03-01/">Amazon S3 documentation</a></li>
<li><a href="http://nettuts.com/misc/how-to-use-amazon-s3-php-to-dynamically-store-and-manage-files-with-ease/"><br />
How to Use Amazon S3 &amp; PHP to Dynamically Store and Manage Files with Ease</a></li>
<li><a href="http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1149&amp;ref=featured"> Building a Small Business Backup System Using Amazon S3</a></li>
</ul>
<p><strong>NOTE ON FOLDERS: </strong>Amazon S3 <span style="text-decoration: underline">does not</span> support folders.  Clients like S3Fox create specific files that are displayed as folders.  Just use slash paths for your object names (foo/bar.txt) and (foo/) as your prefix when listing contents.</p>
<p><span style="font-size: 13px;line-height: 20px">Amazon S3™ is a trademark of Amazon.com, Inc. or its affiliates.</span></p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
						This entry was posted in <a href="http://undesigned.org.za/category/uncategorized/" rel="category tag">Uncategorized</a> and tagged <a href="http://undesigned.org.za/tag/amazon-s3/" rel="tag">Amazon S3</a>, <a href="http://undesigned.org.za/tag/php/" rel="tag">PHP</a>. Bookmark the <a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/" title="Permalink to Amazon S3 PHP Class" rel="bookmark">permalink</a>.											</div><!-- .entry-utility -->
				</div><!-- #post-## -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"></div>
					<div class="nav-next"><a href="http://undesigned.org.za/2007/11/22/nullmailer-a-developers-best-friend/" rel="next">Nullmailer, a developer&#8217;s best friend <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
			<div id="comments">


			<h3 id="comments-title">305 Responses to <em>Amazon S3 PHP Class</em></h3>


			<ol class="commentlist">
					<li class="comment even thread-even depth-1" id="li-comment-2">
		<div id="comment-2">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f76cb83fc1fe3dde58c83e1d818310ea?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://jimhoyd.com' rel='external nofollow' class='url'>Jimmy Ho</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-2">
				November 30, 2007 at 7:54 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>hi I really like your s3 php class, very clean abstracted code. Do you have any ideas on streaming? instead of put, I saw a couple different sites, with examples, like, this one, <a href="http://www.missiondata.com/blog/linux/49/s3-streaming-with-php/" rel="nofollow">http://www.missiondata.com/blog/linux/49/s3-streaming-with-php/</a></p>
<p>Please let me know if you enhance your class to do this</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3">
		<div id="comment-3">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/7ec16bd81533ed7fd32fb73d51d3999d?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Scott</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-3">
				January 26, 2008 at 11:14 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>How would one go about uploading a folder? Apart from putObjectFile into a folder subdirectory? Is there a way to take a whole folder, its files, and subfolders at once?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-4">
		<div id="comment-4">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/075c73b6edc40ec4b3f0bb9bd30dd91b?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.panoye.com' rel='external nofollow' class='url'>puzz</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-4">
				February 5, 2008 at 7:16 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Just downloaded and looked at your source, and I like it&#8230; The example.php works perfectly. Thank you very much!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-5">
		<div id="comment-5">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/822a1c4fe8553618df314a374dbed525?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Hans</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-5">
				February 7, 2008 at 3:41 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hey! Awesome script, very useful. I miss a couple of things though:</p>
<p>A listBuckets function, to check which buckets exists.</p>
<p>A checkObject function that checks if an object with the (file)name exists, without having to get a whole object.</p>
<p>Maybe these things can be done allready, but I can&#8217;t see it. Thanks!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-6">
		<div id="comment-6">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/a62c3a5378c16611c97c2bc8e77ed954?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://vrillusions.com' rel='external nofollow' class='url'>Todd</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-6">
				February 15, 2008 at 10:37 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>thanks for the class, been trying to find one that didn&#8217;t use pear.  New function suggestion would be a getBuckets() function to get  a listing of all the buckets you have created.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-7">
		<div id="comment-7">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-7">
				February 18, 2008 at 9:45 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Jimmy: Streaming like you mentioned probably is possible, will have a look at it sometime.</p>
<p>@Hans: There&#8217;s the listBuckets() function you wanted.  I&#8217;m not sure if a checkObject() could be implemented.</p>
<p>@Scott: You&#8217;d need to iterate through the directory uploading each file.</p>
<p>@Todd: Yeah, the <span class="caps">PEAR</span> requirement is what made me write this class.  listBuckets() there for you too!</p>
<p>Hope you all find it useful.  If you use it for something cool, drop me a line and let me know!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-8">
		<div id="comment-8">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/a62c3a5378c16611c97c2bc8e77ed954?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://vrillusions.com' rel='external nofollow' class='url'>Todd</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-8">
				February 22, 2008 at 7:54 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>RE: checkObject() <br />
there is a function in the api called <span class="caps">HEAD</span> that will fetch the metadata of a file. (Using Rest <span class="caps">API</span> &#062; Operations on objects &#062; <span class="caps">HEAD</span> object)  That may give you what you need as it will give a file not found error if the name doesn&#8217;t exist.</p>
<p>And Don, thanks for the update</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-9">
		<div id="comment-9">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/822a1c4fe8553618df314a374dbed525?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Hans</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-9">
				February 29, 2008 at 1:46 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Don: The timeouts occur with putObjectFile(). Have you tried the script on a shared hosting space? It might be something there..</p>
<p>Is there someway I could debug this?</p>
<p>Thanks for your support!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-10">
		<div id="comment-10">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/4983e2265a444174a474dc7d33bf3ead?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://ImageIngester.com' rel='external nofollow' class='url'>Marc Rochkind</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-10">
				March 14, 2008 at 5:45 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Great work&#8230; lean and mean. I echo what everyone else said about the <span class="caps">PEAR</span> bloat.</p>
<p>But&#8230; you didn&#8217;t mention that it needed Simple <span class="caps">XML</span>. Worse, you used an @ in the call: @simplexml_load_string($data[1]) : $data[1];</p>
<p>(Backslashes are because your web site want to make superscripts from the array indexes.)</p>
<p>Result was absolute silence.</p>
<p>Ouch!</p>
<p>But, it&#8217;s such a great piece of work that I forgive you.</p>
<p>&#8212;Marc</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-12">
		<div id="comment-12">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/d3bd4d921bd93065c40cfa159a5651ce?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://raamdev.com' rel='external nofollow' class='url'>Raam Dev</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-12">
				May 4, 2008 at 5:36 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Great work! I use this script in some of my personal projects and it works great. </p>
<p>One of my projects required the use of PHP4 without any <span class="caps">PEAR</span> packages and figuring out how to create <span class="caps">HMAC</span> signatures was difficult. In case anyone else needs to do this, I documented my results here:</p>
<p><a href="http://blog.raamdev.com/2008/05/03/amazon-s3-hmac-signatures-without-pear-or-php5/" rel="nofollow">http://blog.raamdev.com/2008/05/03/amazon-s3-hmac-signatures-without-pear-or-php5/</a></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-13">
		<div id="comment-13">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1d6a42b7b68f81afbdd6f46f8ab33840?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Edu</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-13">
				May 9, 2008 at 12:11 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Which is the best method for uploading a file from a form?</p>
<p>Put an object from a resource? from a file? from a string?</p>
<p>Thanks!</p>
<p>The file is uploaded first to my server using multipart form data.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-14">
		<div id="comment-14">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/a59e8658bb4aefea71fb24a46d8a13fe?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.phinesolutions.com' rel='external nofollow' class='url'>Ren</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-14">
				May 13, 2008 at 12:12 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Great class. Love the putObjectFile method. I used to create an object, check for type and upload the object&#8230; this method does it all. Very well written. Thank you!!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-15">
		<div id="comment-15">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/60459003eef7ad9de6f47f96a09294e1?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">SJ</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-15">
				June 4, 2008 at 3:37 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi, I must thank you for this because Amazon&#8217;s documentation is useless, I was up and running with this in no time. You have been a huge help!</p>
<p>I&#8217;m having a problem though which I was wondering if you had experienced, the script hangs when uploading very small objects, such as a 1&#215;1 spacer gif, or a browser-dependent stylesheet with just a line or two. The file does appear in the bucket, but then it dies.</p>
<p>I added a <span class="caps">CURL</span> timeout which seemed sensible anyway but to no avail.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-16">
		<div id="comment-16">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/76eca9a80ff02c5c8181f3e7894b6c81?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">malone</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-16">
				June 6, 2008 at 4:05 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Great class, it&#8217;s really saved me a lot of time.</p>
<p>But I was getting [SignatureDoesNotMatch] errors when I sent certain metadata. The docs say you have to &#8220;Sort the collection of headers lexicographically by header name&#8221; before signing them. So I added &#8220;sort($amz);&#8221; before line 791 of S3.php, and that fixed the problem.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-17">
		<div id="comment-17">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-17">
				June 11, 2008 at 12:58 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Works beautifully, many thanks <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
<p>How hard would it be to add in a parameter to putBucket to specify the location of the bucket?  Right now the only possibility is EU (for Europe), with US being the default if you don&#8217;t specify (or does &#8216;US&#8217; work as a location?), but it doesn&#8217;t hurt to plan ahead.</p>
<p>I&#8217;ve only taken a cursory glance at the guts of S3 and S3Request so I&#8217;m not sure where you&#8217;d have to integrate this.  If you were using <span class="caps">PEAR</span>/HTTP_Request, you&#8217;d use the addPutData method of <span class="caps">HTTP</span>_Request to add the appropriate snippet of <span class="caps">XML</span> to the put bucket request.</p>
<p>I&#8217;ll look into it more tomorrow and see what I can figure out, but I thought I&#8217;d see if you know offhand.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-18">
		<div id="comment-18">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-18">
				June 19, 2008 at 11:27 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I&#8217;ve figured out how to specify Europe as the new bucket location, so I&#8217;ll tell you what I&#8217;ve added to make it work.</p>
<p>First I added an array, $extradata, as another private member variable of S3Request.  Then I added a method addExtraData($data) similar in spirit to setHeader.</p>
<p>Next I added the following to the else statement in the &#8216;<span class="caps">PUT</span>&#8217; case of the &#8216;request types&#8217; switch in getResponse(), just after the <span class="caps">CURLOPT</span>_CUSTOMREQUEST line: [Sorry, the formatting doesn&#8217;t work well here.]</p>
<p>$strdata = &#8216;&#8217;;<br />
foreach($extradata as $data)<br />
{<br />
$strdata .= $data;<br />
}</p>
<p>if(strlen($strdata) &#062; 0)<br />
{<br />
$temp = tmpfile();<br />
fwrite($temp, $strdata);<br />
curl_setopt($curl, <span class="caps">CURLOPT</span>_INFILE, $temp);<br />
curl_setopt($curl, <span class="caps">CURLOPT</span>_INFILESIZE, strlen($strdata));<br />
}</p>
<p>Finally, I added a third parameter to S3::putBucket, $europe, which defaults to false.  Just before calling $rest-&#062;getResponse(), I do:</p>
<p>if($europe)<br />
{<br />
$data = &#8216;&#060;CreateBucketConfiguration&#062;n&#8217;;<br />
$data .= &#8216;	&#060;LocationConstraint&#062;EU&#060;/LocationConstraint&#062;n&#8217;;<br />
$data .= &#8216;&#060;/CreateBucketConfiguration&#062;&#8217;;<br />
$rest-&#062;addExtraData($data);<br />
}</p>
<p>Next I plan on seeing whether I can make listBuckets&#8217; detailed return indicate whether a bucket is in Europe or not.  I&#8217;ll let you know if/when I do.</p>
<p>Hope this helps.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-19">
		<div id="comment-19">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-19">
				June 20, 2008 at 12:28 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>You are correct, there is unfortunately no way to get this information in listBuckets.</p>
<p>The changelog says the class supports the ?location and ?torrent parameters.  How do I use them?</p>
<p>Specifically I&#8217;m trying to figure out the location of a bucket.  The request looks like this, according to Amazon:</p>
<p><span class="caps">GET</span> /?location <span class="caps">HTTP</span>/1.1<br />
Host: quotes.s3.amazonaws.com<br />
Date: Tue, 09 Oct 2007 20:26:04 +0000<br />
Authorization: <span class="caps">AWS</span> 1ATXQ3HHA59CYF1CVS02:JUtd9kkJFjbKbkP9f6T/tAxozYY=</p>
<p>How do I get this set up with your s3 class?  The getObjectInfo function doesn&#8217;t work, as it sends a <span class="caps">HEAD</span> request rather than a <span class="caps">GET</span> request as specified by Amazon.  I think I&#8217;ll write another function to get this information until you have a moment to show me how to do it.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-20">
		<div id="comment-20">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-20">
				June 20, 2008 at 1:02 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Heron: I&#8217;ve added a getBucketLocation() method and a 3rd location parameter to putBucket().</p>
<p>But you&#8217;re right the getObjectInfo() <span class="caps">HEAD</span> request wouldn&#8217;t work for ?location.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-21">
		<div id="comment-21">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-21">
				June 20, 2008 at 1:36 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Awesome, that&#8217;s perfect.</p>
<p>Maybe next (if you&#8217;re open to suggestions or requests) you could add copy and rename methods for objects.  Amazon lets you issue a <span class="caps">COPY</span> request to copy a file from one bucket+filename to another bucket+filename; that would make it easy for me to maintain European mirrors of my US data without having to upload the data twice.</p>
<p>You&#8217;d have to implement rename as a <span class="caps">COPY</span> (to the new file name, same bucket) and a <span class="caps">DELETE</span> (old file name).</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-22">
		<div id="comment-22">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-22">
				June 20, 2008 at 4:02 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Heron: Added copyObject() <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />  Didn&#8217;t even know that was possible, thanks for the heads up!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-23">
		<div id="comment-23">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-23">
				June 20, 2008 at 5:50 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Awesome <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> I&#8217;ll try it out at work tomorrow.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-24">
		<div id="comment-24">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-24">
				June 23, 2008 at 6:47 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I used copyObject to implement a &#8216;rename&#8217; function in my little interface, since I don&#8217;t actually need to be able to copy objects right now.</p>
<p>Works like a charm <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-25">
		<div id="comment-25">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/d61f0c325ac4f082125693ec6d702aec?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://blog.ronnyristau.de' rel='external nofollow' class='url'>Ronny</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-25">
				June 24, 2008 at 4:20 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Nice work. Works very well. You made my day! ;]</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-26">
		<div id="comment-26">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com/' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-26">
				June 24, 2008 at 11:47 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Don,</p>
<p>I need to be able to modify the access permissions of an existing bucket.  Something like $s3-&#062;modifyBucketPermissions($bucket, $permission) where $permission is public, public-read, or private.  It might be useful to have a function to obtain the current permission settings for a given bucket as well.  It&#8217;ll be far faster to wait for you to add this than to move the data elsewhere, recreate the bucket, and move the data back&#8230;</p>
<p>Here&#8217;s the documentation link for it:</p>
<p><a href="http://docs.amazonwebservices.com/AmazonS3/2006-03-01/RESTAccessPolicy.html" rel="nofollow">http://docs.amazonwebservices.com/AmazonS3/2006-03-01/RESTAccessPolicy.html</a></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-27">
		<div id="comment-27">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-27">
				June 25, 2008 at 1:45 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Heron: You can do this:</p>
<p>$acp = $s3-&#062;getAccessControlPolicy($bucketName);</p>
<p>// Here you would modify $acp</p>
<p>// Then update it<br />
$s3-&#062;setAccessControlPolicy($bucketName, &#8216;&#8217;, $acp);</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-28">
		<div id="comment-28">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-28">
				July 6, 2008 at 11:12 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Cameron:</p>
<p>Are you uploading the file to your web server and then uploading it from there to S3, or are you uploading the file directly from your computer to S3?</p>
<p>@Swapnil:</p>
<p>$contents = $s3-&#062;getBucket($bucketName);</p>
<p>That will put the contents of $bucketName in $contents.  You can then loop through $contents yourself and filter out the ones you don&#8217;t want.  Read through example.php if you need to see how to use getBucket().</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-29">
		<div id="comment-29">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-29">
				July 8, 2008 at 1:19 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Ben:  You might try the getObjectInfo() function.  Pass it the bucket and uri; if it returns false, the object doesn&#8217;t exist.</p>
<p>E.g.:<br />
if($s3-&#062;getObjectInfo($bucket, $objectname, false))<br />
{ echo &#8216;anchor tag here&#8217;; }<br />
else<br />
{ echo &#8216;no such file&#8217;; }</p>
<p>The third parameter is important; you&#8217;ll get a bunch of object info instead of true/false if you don&#8217;t pass false for the third parameter.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-30">
		<div id="comment-30">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-30">
				July 9, 2008 at 9:46 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@johan:  I ran into that same problem.  You need to urlencode the object name in the delete request.  For example:</p>
<p>$s3-&#062;deleteObject($bucketname, urlencode($objectname));</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-31">
		<div id="comment-31">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/bcb0f2121a12696f31c82b8dc4a6afaf?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://Olive-Drab.com' rel='external nofollow' class='url'>Chuck</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-31">
				July 10, 2008 at 1:34 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Same problem as Cameron #82.  I used &#8220;S3 Firefox Organizer&#8221; to upload a bunch of test files to S3.  I can use $s3-&#062;getBucket in a test script to obtain a list of the files and related data, all OK.  But use of $s3-&#062;getObjectInfo on the same bucket and a specific object fails with &#8220;<sup class="footnote"><a href="#fn72508421248754ae8011cc" rel="nofollow">505</a></sup> Unexpected <span class="caps">HTTP</span> status&#8221; error.  The line in S3.php named is in the method code.</p>
<p>Thank you for this excellent module and I appreciate any help.</p>
<p>Chuck</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-32">
		<div id="comment-32">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-32">
				July 10, 2008 at 3:17 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Chuck: What is the name of the object you&#8217;re trying to get info on?  Does it have a space or other symbols in the name?  If so you might try using urlencode() on the object name before passing it to getObjectInfo().</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-33">
		<div id="comment-33">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/bcb0f2121a12696f31c82b8dc4a6afaf?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://Olive-Drab.com' rel='external nofollow' class='url'>Chuck</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-33">
				July 10, 2008 at 5:07 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Ah, you are the man!  I used your idea to urlencode the filename and my test code now works.</p>
<p>Thank  you very much for the prompt and effective response.</p>
<p>Chuck</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-34">
		<div id="comment-34">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b90f2940d863e219ef05f655f6193aa8?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://angelo.mandato.com' rel='external nofollow' class='url'>Angelo Mandato</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-34">
				July 12, 2008 at 1:42 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I&#8217;ve found the need to add some code to add Cache-Control header for my puts to S3. I think others would find this functionality useful as well. For my usage, I set the Cache-control so static files are not repeatedly downloaded from S3. Please let me know if/how you would like my code addition (e.g. diff,  zip of s3.php or just the function).</p>
<p>Thanks for a great library!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-35">
		<div id="comment-35">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-35">
				July 12, 2008 at 8:45 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Angelo: I&#8217;ve added some changes for request headers.  Thanks for providing the info.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-36">
		<div id="comment-36">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/96e140527e91ecdfcdd8250f90a8aa1a?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.synthasite.com' rel='external nofollow' class='url'>Christo</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-36">
				July 13, 2008 at 7:32 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I added the delimiter field in for getBucket():<br />
&#060;code&#062;<br />
public static function getBucket($bucket, $prefix = null, $marker = null, $maxKeys = null, $delimiter = &#8216;/&#8217;) </p>
<p>{</p>
<p>		$rest = new S3Request(&#8216;<span class="caps">GET</span>&#8217;, $bucket, &#8216;&#8217;);</p>
<p>		if ($prefix !== null &#038;&#038; $prefix !== &#8216;&#8217;) $rest-&#062;setParameter(&#8216;prefix&#8217;, $prefix);</p>
<p>		if ($marker !== null &#038;&#038; $marker !== &#8216;&#8217;) $rest-&#062;setParameter(&#8216;marker&#8217;, $marker);</p>
<p>		if ($maxKeys !== null &#038;&#038; $maxKeys !== &#8216;&#8217;) $rest-&#062;setParameter(&#8216;max-keys&#8217;, $maxKeys);</p>
<p>		if ($delimiter !== null &#038;&#038; $delimiter !== &#8216;&#8217;) $rest-&#062;setParameter(&#8216;delimiter&#8217;, $delimiter);</p>
<p>&#8230;<br />
&#060;/code&#062;</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-37">
		<div id="comment-37">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/8b7091a1db860fae4d52220bb5fa3993?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://silentrant.com' rel='external nofollow' class='url'>Jed Wood</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-37">
				July 14, 2008 at 1:54 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Just checked out the latest version (have never used this class before) and I&#8217;m getting an error of curl_init not defined. Any ideas?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-38">
		<div id="comment-38">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-38">
				July 14, 2008 at 1:57 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Jed: You need the <span class="caps">CURL</span> extension.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-39">
		<div id="comment-39">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/31f0e1e7a0b906a5871cd9441b6eb7dd?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Memphis</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-39">
				July 18, 2008 at 8:01 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Looks like it does not work with file with space in its name.<br />
It says:<br />
Warning: S3::copyObject(mybucket1, blz21 &#8211; 22_t.jpg, mybucket2, blz21 &#8211; 22_t.jpg): [505] Unexpected <span class="caps">HTTP</span> status in /home/username/S3.php on line 446</p>
<p>Is it a bug or i have to encode the file name ?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40">
		<div id="comment-40">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-40">
				July 19, 2008 at 2:51 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>If you&#8217;d read previous posts, Memphis, you&#8217;d know the solution: You need to urlencode the object name before sending it.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-41">
		<div id="comment-41">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/31f0e1e7a0b906a5871cd9441b6eb7dd?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Memphis</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-41">
				July 19, 2008 at 7:36 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thanks, it works well. Do you know how to use getBucket() to list a part of objects in a bucket. For example I have 10000+ objects in my bucket and I want to list  the first 1000 and then the next 1000 objects &#8230; in alphabetical order ? The $maxKeys param does not work for me in that case</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-42">
		<div id="comment-42">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-42">
				July 20, 2008 at 4:32 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Memphis: If I remember right, it gives you the files from A-Z, 0-9, then a-z in that order.  That&#8217;s not exactly alphabetical; it&#8217;s ordered by <span class="caps">ASCII</span> code.  If you want it to be in case-insensitive alphabetic order, you&#8217;ll need to grab <strong>all</strong> the keys yourself, sort them, then cache them locally before displaying them to the user.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-43">
		<div id="comment-43">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1e1ceeb39866031496170d87cae919ef?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Mike</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-43">
				July 21, 2008 at 11:01 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Is there any chance to add curl_multi functionality so that we can send requests in parallel?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-44">
		<div id="comment-44">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-44">
				July 21, 2008 at 11:23 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Mike: You could.. But unfortunately that functionality will not be added anytime soon.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-45">
		<div id="comment-45">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/45d3e86afaff4b0fe8d5130e4529fa90?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Randy</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-45">
				July 23, 2008 at 3:39 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>getObject method seems to be capable of writing object to a resource. but how can I make the process in which server side php requests S3 object with authentication and client user can download the object from browser?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-46">
		<div id="comment-46">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-46">
				July 25, 2008 at 8:57 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Randy: I assume you&#8217;re asking because you&#8217;ve made your files private.  You can generate a temporary download link using this method:</p>
<p><a href="http://docs.amazonwebservices.com/AmazonS3/2006-03-01/index.html?RESTAuthentication.html" rel="nofollow">http://docs.amazonwebservices.com/AmazonS3/2006-03-01/index.html?RESTAuthentication.html</a></p>
<p>Scroll down to the part labelled &#8220;Query String Request Authentication Alternative&#8221; near the bottom.  Using this method, you can give your users a controlled way to download private objects from your buckets.</p>
<p>This thread goes in to more detail: <a href="http://developer.amazonwebservices.com/connect/thread.jspa?messageID=71402&#038;#71402" rel="nofollow">http://developer.amazonwebservices.com/connect/thread.jspa?messageID=71402&#038;#71402</a></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-47">
		<div id="comment-47">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f0b548cb051c1827e8e1e676028a0938?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">profes</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-47">
				August 1, 2008 at 2:40 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi, only small update to your S3.php class (in function inputFile), you can use <br />
[ &#8212; cut &#8212; ]<br />
if ( !is_readable($file) || !is_file($file) ) {<br />
[ &#8212; cut &#8212; ]</p>
<p>instead of </p>
<p>[ &#8212; cut &#8212; ]<br />
if (!file_exists($file) || !is_file($file) || !is_readable($file)) {<br />
[ &#8212; cut &#8212; ]<br />
&#8220;is_readable&#8221; will check if file really exists. <br />
Cheers!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-48">
		<div id="comment-48">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-48">
				August 4, 2008 at 9:43 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Don,</p>
<p>I&#8217;m having trouble getting bucket logging to work.  I have a private bucket &#8220;foobar.company.com&#8221; and another private bucket &#8220;company-access-logs&#8221;.  It is my understanding that this:</p>
<p>$s3-&#062;setBucketLogging(&#8216;foobar.company.com&#8217;, &#8216;company-access-logs&#8217;, &#8216;foobar-&#8217;);</p>
<p>should enable logging for bucket foobar.company.com into bucket company-access-logs.  However, I get the following error:</p>
<p>Warning: S3::setBucketLogging(foobar.company.com, ): [InvalidTargetBucketForLogging] You must give the log-delivery group <span class="caps">WRITE</span> and <span class="caps">READ</span>_ACP permissions to the target bucket in /var/www/localhost/htdocs/s3/S3.php on line 491</p>
<p>Any idea what I&#8217;m doing wrong?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-49">
		<div id="comment-49">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-49">
				August 4, 2008 at 10:14 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Solved via e-mail.  Thanks, Don <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-11">
		<div id="comment-11">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/df285f7b6e32c5458d4a60e26bb81d77?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.saveryimages.com' rel='external nofollow' class='url'>Chris Savery</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-11">
				August 7, 2008 at 7:52 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi Don,<br />
I modified your copyObject slightly to make a new setObjectInfo that allows for replacing meta data on objects without copying using x-amz-metadata-directive. This was very useful for me to fix Cache-Control headers on lots of images already uploaded. I&#8217;ve used it and it appears to work but one thing I noticed is that a new Content-Type needs to be supplied or else browsers may not respond as expected. I also added an acl parameter so that could be changed too. I added the code here but it doesn&#8217;t show well at all. Please email me and I&#8217;ll give it to you as it may be handy for others too. It was also nice for removing junk headers added by s3fox &#8211; didn&#8217;t like that stuff showing up anyway.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-50">
		<div id="comment-50">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/9c1b02e5b0bf2a08f83cb2192f63024f?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Giraldo</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-50">
				August 8, 2008 at 1:52 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>A little help on creating folders. </p>
<p>Just add the folder name to the file name (not the temp file name).</p>
<p>So it would be like:<br />
$s3-&#062;putObjectFile($fileTemp, $bucketName, &#8216;images/&#8217;.$fileName, S3::ACL_PUBLIC_READ, array(),&#8216;image/jpg&#8217;);</p>
<p>Remember to add the contentType at the end if you want to be able to view your files via the browser.</p>
<p>-G</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-51">
		<div id="comment-51">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/3ed27f86344115d93d1d4193a3eb1aaa?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">mahendra</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-51">
				August 26, 2008 at 3:57 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>hi<br />
i have some confusion with listBuckets() function<br />
bcaz it shows the list of bucket which you had created but i have to validate new bucket name by matching all over the bucket names so how can i do that??<br />
is there any reference or function for the same???</p>
<p>thanks in Advance</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-52">
		<div id="comment-52">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-52">
				August 27, 2008 at 6:42 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Are you asking how to tell if a given bucket name is taken globally?  You can&#8217;t, except by trying to register it.  The best you can do is test it against the list of buckets you have registered yourself &#8211; that is, the ones returned by listBuckets.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-53">
		<div id="comment-53">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/3ed27f86344115d93d1d4193a3eb1aaa?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">mahendra</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-53">
				August 28, 2008 at 6:38 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>hi Heron<br />
Thanks 4 replying..<br />
but actually when i use to create the bucket using s3 class as fuction  putBucket ($bucketname) so what it does it just over right that bucket and updates the time of creation and no error received that bucket already exists or any error code </p>
<p>that&#8217;s why i am confused that why it is doing so either i am doing something wrong&#8230; or pl suggest me&#8230;</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-54">
		<div id="comment-54">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/aaf9fa7b4afcb5cb04a6b92f3c3d3048?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.norio.co.za' rel='external nofollow' class='url'>Norio</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-54">
				August 31, 2008 at 6:02 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hey bro <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
<p>Blog is coming along nicely.  Loving the tutorials!  About to code something up for my GuitarForum.co.za peeps using the S3 class.  Thanks!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-55">
		<div id="comment-55">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/8e470e4936c988ef13c762370420075d?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://twitter.com/mmoney' rel='external nofollow' class='url'>mmoney</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-55">
				September 2, 2008 at 12:52 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Your S3 <span class="caps">PHP</span> Class rocks!! Love that it does not require anything more than php 5.2. and I got my work done entotale in about 5hrs today. That time does include tweaks for human readable output. <span class="caps">THANKS</span>!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-56">
		<div id="comment-56">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-56">
				September 5, 2008 at 12:58 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Nial,</p>
<p>I&#8217;m not sure what <span class="caps">PHP</span>&#8217;s behavior is; however paying for bandwidth twice (uploading to your server, then uploading to Amazon) seems superfluous.  To help with this, Amazon provides a method to <span class="caps">POST</span> a file directly to your bucket, given your authorization, and then redirect to a page of your choice.  You can find more information here:</p>
<p><a href="http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434&#038;ref=featured" rel="nofollow">http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434&#038;ref=featured</a></p>
<p>Enjoy <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-57">
		<div id="comment-57">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1367a0bc001aff29e3ca0e5e492593d6?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">jasonmog</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-57">
				September 8, 2008 at 10:21 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>there&#8217;s a bug where sprintf blows up if there&#8217;s a % in the variable value in your sprintf calls. use %s placeholders everywhere and move the variables into the argument list</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-58">
		<div id="comment-58">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/73ee4845eacc70d5de590274ff479fd1?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.conquerclub.com' rel='external nofollow' class='url'>Brian</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-58">
				September 10, 2008 at 7:53 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I have a lot of data to load into S3 so I did some benchmarking. I <span class="caps">PUT</span> 1000 small objects into a bucket with both classes:</p>
<p><span class="caps">CURL</span> version took 7.5 minutes.</p>
<p><span class="caps">PEAR</span> version took 4.5 minutes.</p>
<p>Of the 7.5 minutes, 6.5 are spent inside putObject&#8217;s $rest-&#062;getResponse() call.</p>
<p>I hope this will encourage you to try and optimize your class. I still plan to use it in production either way though so thanks for making it <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":-)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-59">
		<div id="comment-59">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/cfc32d92f1eafd2b85c3f3079407bd02?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://chxor.chxo.com' rel='external nofollow' class='url'>Chris Snyder</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-59">
				September 10, 2008 at 8:54 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Malone, @Don Regarding empty files, there is a bug in the S3.php code. </p>
<p>There are two conditional statements in S3::putObject that include $input[&#8216;size&#8217;] &#062; 0. If you replace those with $input[&#8216;size&#8217;] &#062; -1 it works fine. </p>
<p>I&#8217;m not sure why the check is there in the first place, but anyway this fix will still prevent negative sizes. </p>
<p>Cheers!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-60">
		<div id="comment-60">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/cfc32d92f1eafd2b85c3f3079407bd02?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://chxor.chxo.com' rel='external nofollow' class='url'>Chris Snyder</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-60">
				September 10, 2008 at 9:27 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Found another bug, in that <span class="caps">CURL</span> is not verifying the <span class="caps">SSL</span> certificate coming from s3.amazonaws.com. If we care enough to use <span class="caps">SSL</span>, we should definitely be checking the certificate. <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_wink.gif" alt=";-)" class="wp-smiley" /></p>
<p>Anyway, issues have been added at code.google.com for this and comment #127. </p>
<p>Thanks for such a useful class!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-61">
		<div id="comment-61">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-61">
				September 11, 2008 at 5:10 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Chris: Regarding <span class="caps">SSL</span> verification: it is not a bug &#8211; <span class="caps">CURL</span> will spit out warnings otherwise.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-62">
		<div id="comment-62">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-62">
				September 11, 2008 at 5:17 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Chris: The 0 byte check exists because I never expected people to upload empty files <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />  Will change in the next update anyway.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-63">
		<div id="comment-63">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-63">
				September 11, 2008 at 5:34 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Brian: Sorry to say it but this isn&#8217;t a meaningful benchmark.  Firstly, I cannot see how <span class="caps">PHP</span> code could be faster than C code.  Secondly, the <span class="caps">PEAR</span> version buffers files in memory and using <span class="caps">CURL</span> we are actually able to have optimal unbuffered read/writes.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-64">
		<div id="comment-64">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/2f254400181d0c30a5a6c56718166e9e?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.iedesign.co.uk' rel='external nofollow' class='url'>David</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-64">
				September 11, 2008 at 2:00 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Don &#8211; Brilliant class, implemented in no time at all!</p>
<p>Are you planning to add support for folders within buckets?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-65">
		<div id="comment-65">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1954c10353838af0549954844783efd9?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Kevin</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-65">
				September 11, 2008 at 2:07 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi Don, first of all, great work. I&#8217;m using your class to back up my database to S3. Quick question, what are the advantages or disadvantages of your class versus a <span class="caps">PEAR</span> based class? The class offered by neurofuzzy.net uses two <span class="caps">PEAR</span> extensions (<span class="caps">HTTP</span>_Request and <span class="caps">HMAC</span>). Is there a speed difference? Which class is better at buffering and streaming large files? Thanks for your help. Keep up the good work.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-66">
		<div id="comment-66">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-66">
				September 11, 2008 at 2:20 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Kevin: There are a number of advantages &#8211; but the fact that there are no <span class="caps">PEAR</span> dependencies is usually enough for most.  And if you are copying large files, this is the one you want to use.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-67">
		<div id="comment-67">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-67">
				September 11, 2008 at 2:41 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@David: There is a way to emulate folders by using &#8220;_$folder$&#8221; &#8211; but you would have to look into it&#8230;  If you create a folder with S3Fox and retrieve a list using this class you will see how it is done.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-68">
		<div id="comment-68">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1954c10353838af0549954844783efd9?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Kevin</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-68">
				September 11, 2008 at 2:43 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi Don, one more question. Are we still limited to 2GB files max? Thanks.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-69">
		<div id="comment-69">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-69">
				September 11, 2008 at 2:50 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Kevin:  Yes.  See <a href="http://bugs.php.net/bug.php?id=27792" rel="nofollow">http://bugs.php.net/bug.php?id=27792</a> for more information.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-70">
		<div id="comment-70">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1954c10353838af0549954844783efd9?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Kevin</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-70">
				September 13, 2008 at 12:19 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Don, when we add a delimiter to getBucket(), do you roll up the prefix? I notice the results still have all the prefixes attached to the front of the key names. Thanks.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-71">
		<div id="comment-71">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1f779f89fb996380a47238e568a06c68?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Sven</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-71">
				September 14, 2008 at 6:28 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hmm, this is not working for me. Tried it in various hosting environments and I&#8217;m still experiencing the issues outlined in comment #14: </p>
<p>&#8220;When I try to upload large files it will just stop after a couple minutes. It gives no error.&#8221; </p>
<p>Any ideas?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-72">
		<div id="comment-72">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b179376b468a3ceec2beb0dd9ecbfe86?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.colum.edu' rel='external nofollow' class='url'>Bryan</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-72">
				September 17, 2008 at 8:07 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Sven I&#8217;m having the same problem but only on large files.  I tried setting <span class="caps">CURLOPT</span>_TIMEOUT to a high number to no avail.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-73">
		<div id="comment-73">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-73">
				September 17, 2008 at 8:33 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Sven and Bryan: If you&#8217;re using this class to upload from a user&#8217;s computer to an S3 bucket, you may want to consider <span class="caps">POST</span>ing directly to the S3 bucket, as explained in this article:</p>
<p><a href="http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434&#038;ref=featured" rel="nofollow">http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434&#038;ref=featured</a></p>
<p>If, however, you&#8217;re using it to upload files from your server to S3, you&#8217;ll need to figure out what your Apache settings are and tweak them so Apache doesn&#8217;t time out.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-74">
		<div id="comment-74">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/2f254400181d0c30a5a6c56718166e9e?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">David</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-74">
				September 23, 2008 at 3:39 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@141 &#8211; The following <span class="caps">PHP</span> specific tutorial is good, and uses <span class="caps">AJAX</span> to upload files</p>
<p><a href="http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1618" rel="nofollow">http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1618</a></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-75">
		<div id="comment-75">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/455aa35e3286e7578896cc9db7d9ef35?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Sam</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-75">
				September 25, 2008 at 1:20 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I have a question similiar to Post 103.  I have a file that is private and needs to be automatically downloaded.  How is this be done with the getObject?  Or is the best way to use &#8220;Query String Request Authentication Alternative?&#8221;  Thanks.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-76">
		<div id="comment-76">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-76">
				September 25, 2008 at 10:19 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Sam: You need the user&#8217;s browser to be able to download it?  You&#8217;ll want to generate a temporary <span class="caps">URL</span> giving permission to download the private file, as in this article:</p>
<p><a href="http://developer.amazonwebservices.com/connect/thread.jspa?messageID=71402&#038;#71402" rel="nofollow">http://developer.amazonwebservices.com/connect/thread.jspa?messageID=71402&#038;#71402</a></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-77">
		<div id="comment-77">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/d6a83bc058808b11c0ead037734824de?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">marek</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-77">
				September 26, 2008 at 10:33 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I&#8217;ve got following problem &#8211; sometimes (10% probability?) when uploading to S3, my php (<span class="caps">CLI</span>, 5.2.0-8+etch11, libcurl/7.15.5 OpenSSL/0.9.8c zlib/1.2.3 libidn/0.6.5) hangs there forever eating 100% cpu. Strace shows only those two lines again and again&#8230;</p>
<p>poll([{fd=4, events=POLLOUT, revents=POLLHUP}], 1, 0) = 1<br />
poll([{fd=4, events=POLLOUT, revents=POLLHUP}], 1, 1000) = 1</p>
<p>It happens in putObjectFile() uploading cca 750MB file.</p>
<p>Any idea what the problem might be?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-78">
		<div id="comment-78">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/455aa35e3286e7578896cc9db7d9ef35?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Sam</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-78">
				September 26, 2008 at 5:28 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Heron:  Thanks for your help.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-79">
		<div id="comment-79">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/8af95d9d4020800dfc5d1c8ddf0b2798?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.pixelearth.net/main/' rel='external nofollow' class='url'>pixelterra</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-79">
				October 3, 2008 at 9:25 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Your class didn&#8217;t allow for authenticating via query string:</p>
<p>		function getAuthenticatedUrl ($bucket, $resource, $expires_in) {<br />
		$expires 		= time() + $expires_in;<br />
		$string_to_sign = &#8220;<span class="caps">GET</span>nnn{$expires}n/{$bucket}/{$resource}&#8221;;<br />
		$signature		= urlencode(base64_encode((hash_hmac(&#8220;sha1&#8221;, utf8_encode($string_to_sign), self::$__secretKey, <span class="caps">TRUE</span>))));</p>
<p>		$authentication_params = &#8220;AWSAccessKeyId=&#8221; . self::$__accessKey;<br />
		$authentication_params.= &#8220;&#038;Expires=$expires&#8221;;<br />
		$authentication_params.= &#8220;&#038;Signature=$signature&#8221;;</p>
<p>		$link = &#8220;<a href="http://$bucket.s3.amazonaws.com/$resource?$authentication_params&#038;#8221" rel="nofollow">http://$bucket.s3.amazonaws.com/$resource?$authentication_params&#038;#8221</a>;;</p>
<p>		return $link;<br />
		//url encode this?<br />
		//echo &#8220;&#060;a href=&#8221;&#8220;.htmlentities($link).&#8221;&#8221;&#062;Authenticated Link&#060;/a&#062;&#8221;; </p>
<p>	}</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-80">
		<div id="comment-80">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/aa81db2633a359866dccd1c3d191b5f5?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.exiioninfotech.com' rel='external nofollow' class='url'>Pushpesh</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-80">
				October 8, 2008 at 1:54 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Don,<br />
I am using copyObject() function for copying various images within a bucket. It creates a copy of the image, but when i try to view the image, it  says &#8220;Access Denied&#8221;&#8230;Could you figure out the reason.<br />
Many thanks.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-81">
		<div id="comment-81">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/aa81db2633a359866dccd1c3d191b5f5?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.exiioninfotech.com' rel='external nofollow' class='url'>Pushpesh</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-81">
				October 8, 2008 at 3:07 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Don,<br />
In reply to my earlier query (no. 148), i have found a workaround for the stated problem. All i needed to do was to add the following :-<br />
$rest-&#062;setAmzHeader(&#8216;x-amz-acl&#8217;, self::ACL_PUBLIC_READ);<br />
after the line<br />
$rest-&#062;setAmzHeader(&#8216;x-amz-copy-source&#8217;, sprintf(&#8217;/%s/%s&#8217;, $srcBucket, $srcUri));<br />
in the copyObject(&#8230;) function.<br />
Thanks</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-82">
		<div id="comment-82">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-82">
				October 8, 2008 at 6:12 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@pixelterra: Added getAuthenticatedURL()</p>
<p>@Pushpesh: Added an <span class="caps">ACL</span> parameter to copyObject()</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-83">
		<div id="comment-83">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/417da4ebe698388116f7220a0ee9fbc2?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://onlito.com' rel='external nofollow' class='url'>marc breuer</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-83">
				October 22, 2008 at 7:59 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>great stuff, worked fine for me! have only done some simple uploading and deleting of objects, but I don&#8217;t really need more than that.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-84">
		<div id="comment-84">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/31adf7d14071f72dc7857292782492db?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Mike</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-84">
				November 4, 2008 at 11:56 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I&#8217;m not sure what causes this, but when I tried the script below:<br />
&#060;?php<br />
include(&#8216;S3.php&#8217;);<br />
if (!defined(&#8216;awsAccessKey&#8217;)) define(&#8216;awsAccessKey&#8217;, &#8216;MyAccessKey&#8217;);<br />
if (!defined(&#8216;awsSecretKey&#8217;)) define(&#8216;awsSecretKey&#8217;, &#8216;MySecretKey&#8217;);</p>
<p>$s3 = new S3(awsAccessKey, awsSecretKey);<br />
$a = $s3-&#062;listBuckets();<br />
echo &#8220;S3::listBuckets(): &#8220;.$a[ 0 ].&#8221;n&#8221;;</p>
<p>define(&#8216;<span class="caps">BUCKET</span>&#8217;,$a[ 0 ]);<br />
$RESPONSE = $s3-&#062;getBucket(<span class="caps">BUCKET</span>);<br />
?&#062;</p>
<p>it outputs as:<br />
S3::listBuckets(): [My_Correct_Bucket_Name]<br />
Warning: S3::getBucket(): [NoSuchBucket] The specified bucket does not exist in &#8230;./s3/S3.php on line 134</p>
<p>Something with my script, or with my S3 account? Thanks</p>
<p>*I have to add spaces in $a[ 0 ] to avoid autolink</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-85">
		<div id="comment-85">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-85">
				November 5, 2008 at 7:17 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Mike: You&#8217;ll want to make sure there are no extraneous newlines or anything in $a[ 0 ].  Also, does it work if you do $s3-&#062;getBucket(&#8216;putbucketnamehere&#8217;); manually?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-86">
		<div id="comment-86">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/c6d729b032c5015eb23f2e3573a4999d?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Joao Pinto</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-86">
				November 6, 2008 at 8:29 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Dear Don Schonknecht,</p>
<p>Congratulations for S3.php file. Great job!<br />
However this class doesn&#8217;t allow list of objects based on queries, because you have an error on your S3Request class, but I already fixed it.<br />
Basically you weren&#8217;t parsing the uri&#8217;s &#8220;querystring&#8221; on the &#8220;StringToSign&#8221; (the &#8220;resource&#8221; variable) on the S3Request class.<br />
If you check the <span class="caps">AWS</span>-S3 tutorial, it says when you have a querystring on the uri, the StringToSign only should contains the bucket and the request_uri. This means you should only append, to the StringToSign, the path part of the un-decoded <span class="caps">HTTP</span> Request-<span class="caps">URI</span>, up-to but not including the query string.<br />
For more information see the 3rd example of the <a href="http://docs.amazonwebservices.com/AmazonS3/2006-03-01/index.html?RESTAuthentication.html" rel="nofollow">http://docs.amazonwebservices.com/AmazonS3/2006-03-01/index.html?RESTAuthentication.html</a> url.</p>
<p>Like I told you before, I already fixed this bug.<br />
Basically I added/changed the following lines on the S3Request constructor function:</p>
<p>    $resource_uri = strpos($this-&#062;uri, &#8220;?&#8221;) &#062; 0 ? substr($this-&#062;uri, 0, strpos($this-&#062;uri, &#8220;?&#8221;)): $this-&#062;uri;<br />
    if ($this-&#062;bucket !== &#8216;&#8217;) {<br />
         $this-&#062;resource = &#8216;/&#8217;.$this-&#062;bucket.$resource_uri;<br />
         $this-&#062;headers[&#8216;Host&#8217;] = $this-&#062;bucket.&#8217;.s3.amazonaws.com&#8217;;<br />
    } else {<br />
         $this-&#062;headers[&#8216;Host&#8217;] = &#8216;s3.amazonaws.com&#8217;;<br />
         $this-&#062;resource = strlen($this-&#062;uri) &#062; 1 ? &#8216;/&#8217;.$this-&#062;bucket.$resource_uri : $resource_uri;<br />
    }</p>
<p>This means the S3Request constructor has now the following code:</p>
<p>    function __construct($verb, $bucket = &#8216;&#8217;, $uri = &#8216;&#8217;) {<br />
        $this-&#062;verb = $verb;<br />
        $this-&#062;bucket = strtolower($bucket);<br />
        $this-&#062;uri = $uri !== &#8216;&#8217; ? &#8216;/&#8217;.$uri : &#8216;/&#8217;;</p>
<p>        $resource_uri = strpos($this-&#062;uri, &#8220;?&#8221;) &#062; 0 ? substr($this-&#062;uri, 0, strpos($this-&#062;uri, &#8220;?&#8221;)): $this-&#062;uri;<br />
        if ($this-&#062;bucket !== &#8216;&#8217;) {<br />
            $this-&#062;resource = &#8216;/&#8217;.$this-&#062;bucket.$resource_uri;<br />
            $this-&#062;headers[&#8216;Host&#8217;] = $this-&#062;bucket.&#8217;.s3.amazonaws.com&#8217;;<br />
        } else {<br />
            $this-&#062;headers[&#8216;Host&#8217;] = &#8216;s3.amazonaws.com&#8217;;<br />
        $this-&#062;resource = strlen($this-&#062;uri) &#062; 1 ? &#8216;/&#8217;.$this-&#062;bucket.$resource_uri : $resource_uri;<br />
        }<br />
        $this-&#062;headers[&#8216;Date&#8217;] = gmdate(&#8216;D, d M Y H:i:s T&#8217;);</p>
<p>        $this-&#062;response = new <span class="caps">STDC</span>lass;<br />
        $this-&#062;response-&#062;error = false;<br />
    }</p>
<p>If you have any other question, don&#8217;t hesitate to email me to <a href="mailto:a19836@gmail.com">a19836@gmail.com</a>.</p>
<p>Sincerely,<br />
Joao Pinto</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-87">
		<div id="comment-87">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/c6d729b032c5015eb23f2e3573a4999d?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Joao Pinto</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-87">
				November 6, 2008 at 8:42 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Dear S3 Owners,</p>
<p>I&#8217;m changing the S3 class functions, to return a list of objects and a list of Objects Info, if the uri contains a query string.<br />
I will send you the new code to your email or post it here, when will be ready.<br />
Can you send me your email to <a href="mailto:a19836@gmail.com">a19836@gmail.com</a>, please?</p>
<p>Regards,<br />
Joao Pinto</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-88">
		<div id="comment-88">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1954c10353838af0549954844783efd9?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Kevin</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-88">
				November 19, 2008 at 5:55 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Any chance you might support Cloudfront in the future?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-89">
		<div id="comment-89">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/e5c550f1d414e90c3dea32f2630e258e?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://james.cridland.net/' rel='external nofollow' class='url'>James Cridland</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-89">
				November 20, 2008 at 5:58 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Setting metadata headers isn&#8217;t quite working&#8230; I&#8217;m using&#8230;</p>
<p>$metaHeaders[&#8216;Content-Type&#8217;]=&#8216;image/png&#8217;;</p>
<p>&#8230;and then including $metaHeaders in the putObject instruction.</p>
<p>I&#8217;m getting back:</p>
<p>x-amz-meta-content-type: image/png<br />
Content-Type: application/octet-stream</p>
<p>What am I doing wrong?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-90">
		<div id="comment-90">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-90">
				November 20, 2008 at 6:23 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Kevin: Written some code for CloudFront &#8211; it will most likely appear in the next release.</p>
<p>@James Cridland: The $metaHeaders are the x-amz-meta-* headers.  What you need to do is use $requestHeaders[&#8216;Content-Type&#8217;] = &#8216;image/png&#8217;</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-91">
		<div id="comment-91">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/e5c550f1d414e90c3dea32f2630e258e?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://james.cridland.net' rel='external nofollow' class='url'>James Cridland</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-91">
				November 21, 2008 at 12:46 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Closer, but still no dice. Now using putObjectFile &#8211; Content-Type works fine (as a part of the call), but</p>
<p>$requestHeaders[&#8216;Cache-Control&#8217;]=&#8216;max-age=315360000&#8217;;</p>
<p>&#8230; doesn&#8217;t really do the job, returning</p>
<p>x-amz-meta-cache-control: max-age=315360000</p>
<p>I could really do with setting the cache-control properly&#8230;</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-92">
		<div id="comment-92">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/e5c550f1d414e90c3dea32f2630e258e?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://james.cridland.net' rel='external nofollow' class='url'>James Cridland</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-92">
				November 21, 2008 at 1:02 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>OK, worked a workaround.<br />
$requestHeaders[&#8216;Cache-Control&#8217;]=&#8216;max-age=315360000&#8217;;<br />
$requestHeaders[&#8216;Content-Type&#8217;]=&#8216;image/png&#8217;;</p>
<p>$transfer-&#062;putObject($transfer-&#062;inputResource(fopen($file, &#8216;rb&#8217;), filesize($file)), $bucketname, $object_name, S3::ACL_PUBLIC_READ, array(), $requestHeaders)</p>
<p>That works, though not using putObjectFile. But it works. So. Good. <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_wink.gif" alt=";)" class="wp-smiley" /></p>
<p>(That sets a ten-year cache on that image, btw.)</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-93">
		<div id="comment-93">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/cfc32d92f1eafd2b85c3f3079407bd02?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://chxor.chxo.com/' rel='external nofollow' class='url'>Chris Snyder</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-93">
				November 27, 2008 at 7:08 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hey, CloudFront support already, nice! Didn&#8217;t there used to be a PayPal link around here somewhere? <br />
Well anyway, thanks for keeping up with the latest and continuing to improve the class.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-94">
		<div id="comment-94">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/33c2a29a936466503b218c5f18d492f7?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://24b6.net' rel='external nofollow' class='url'>arthur</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-94">
				December 2, 2008 at 7:48 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Question about licensing- I&#8217;ve create a Drupal module that uses S3 as a storage option (<a href="http://drupal.org/project/media_mover" rel="nofollow">http://drupal.org/project/media_mover</a>) and currently uses a different S3 library which does not use curl. I&#8217;m interested in using your library, but to include it in Drupal&#8217;s <span class="caps">CVS</span> repository, it would have to be under the <span class="caps">GPL</span>. Would you consider releasing it under the <span class="caps">GPL</span> as well?</p>
<p>Thanks so much</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-95">
		<div id="comment-95">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-95">
				December 3, 2008 at 12:03 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Arthur, this S3 class is released under something like the <span class="caps">BSD</span> license (which is more permissive than the <span class="caps">GPL</span>).  I&#8217;m not a lawyer but I don&#8217;t think there&#8217;s a problem with using the S3 class in conjunction with <span class="caps">GPL</span>&#8217;ed code, as long as you retain the license information given in the S3.php file and maintain a clear separation between your code and the S3 class.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-96">
		<div id="comment-96">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/33c2a29a936466503b218c5f18d492f7?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://24b6.net' rel='external nofollow' class='url'>arthur</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-96">
				December 5, 2008 at 12:34 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Heron- unfortunately, the rules for the Drupal <span class="caps">CVS</span> repository are strict as far as I know- <span class="caps">GPL</span> or include a link to a location where the user can download the file. My preferences is obviously to include the class in the repository which is why I&#8217;m asking. I&#8217;m not a lawyer either, but I do know that every time the <span class="caps">MIT</span>/BSD/GPL thing comes up people seem to loose their minds which is why I&#8217;m trying to ask nicely <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-97">
		<div id="comment-97">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1954c10353838af0549954844783efd9?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Kevin</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-97">
				December 5, 2008 at 11:21 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Have any of you tried changing the access control policy of objects in S3? I&#8217;m trying to add AllUsers <span class="caps">READ</span> access but it doesn&#8217;t seem to be saving the changes properly.</p>
<p>First I use getAccessControlPolicy on the object to get $acp, then I add:</p>
<p>$acp[&#8220;acl&#8221;][] = array(&#8220;type&#8221; =&#062; &#8220;Group&#8221;, &#8220;uri&#8221; =&#062; &#8220;<a href="http://acs.amazonaws.com/groups/global/AllUsers&#038;#8221" rel="nofollow">http://acs.amazonaws.com/groups/global/AllUsers&#038;#8221</a>;, &#8220;permission&#8221; =&#062; &#8220;<span class="caps">READ</span>&#8221;);</p>
<p>Then I set it back using setAccessControlPolicy but it doesn&#8217;t seem to be storing the change.</p>
<p>Thanks</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-98">
		<div id="comment-98">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1954c10353838af0549954844783efd9?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Kevin</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-98">
				December 5, 2008 at 11:25 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Oops I apologize. I figured out the problem. Sorry, I wish I could delete the last comment. Thanks again for your work Don!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-99">
		<div id="comment-99">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/3f9afad5b670400113fe7223cbefd339?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://bigornot-fr.blogspot.com' rel='external nofollow' class='url'>Mat</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-99">
				December 17, 2008 at 1:32 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thanks <em>a lot</em> for this class ! It&#8217;s clean and very helpfull <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-100">
		<div id="comment-100">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/40690ca147b6fda7a1dc3a2640bc2f4b?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">david</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-100">
				December 17, 2008 at 6:15 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Nice class. Just wanted to let everyone know about a problem I ran into using this. I was getting [NotSignedUp] Your account is not signed up for the S3 service. You must sign up before you can use S3. <br />
I am running on a Windows machine and it is apparently an issue with the <span class="caps">SSL</span> cert on Amazon and my windows box. I&#8217;ve turned off <span class="caps">SSL</span> for now and will go back and investigate when I get everything else working. Just didn&#8217;t want anyone else to bang their head against a wall on this one.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-101">
		<div id="comment-101">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/96004e3a70869037cd8758f7fa9d9131?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Sune Kibsgaard Pedersen</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-101">
				December 23, 2008 at 1:18 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Great class, very well written.</p>
<p>It would be nice if it was possible to get the CommonPrefixes out when doing getBucket() with a delimiter</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-102">
		<div id="comment-102">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/c6d729b032c5015eb23f2e3573a4999d?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://code.google.com/p/awss3filemanager/' rel='external nofollow' class='url'>Joao Pinto</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-102">
				December 23, 2008 at 1:23 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hey guys,</p>
<p>I created a new Google project with a file manager to the Amazon S3 service. <br />
Please visit the following page: <a href="http://code.google.com/p/awss3filemanager/" rel="nofollow">http://code.google.com/p/awss3filemanager/</a>.</p>
<p>I&#8217;m searching coders to help me improving this amazon file manager project.</p>
<p>Sincerely, <br />
Joao Pinto</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-103">
		<div id="comment-103">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/2f3dc5573a418990fb5978cc42dc7685?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://unsharptech.com' rel='external nofollow' class='url'>sam</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-103">
				December 29, 2008 at 7:33 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Maybe I am miss-using the function, but for putObject(), if you pass an empty value or false for $metaHeaders there is no error checking so on line # 349 you get an error when it tries to run a foreach on $metaHeaders.</p>
<p>Is this by design, am I supposed to pass a different (empty) value when I don&#8217;t have any metaHeaders but do have requestHeaders?</p>
<p>Example: <br />
$s3-&#062;putObjectFile($filePath, $bucketName, $fileName, S3::ACL_PUBLIC_READ, &#8216;&#8217;, $requestHeadersArray);</p>
<p>Using version 0.3.9</p>
<p><span class="caps">BTW</span>, thank you very much for creating this class, it&#8217;s been very useful!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-104">
		<div id="comment-104">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-104">
				December 30, 2008 at 9:18 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Sam,</p>
<p>If you pass array() as that parameter, you should be fine.  For example:</p>
<p>$s3-&#062;putObjectFile($filePath, $bucketName, $fileName, S3::ACL_PUBLIC_READ, array(), $requestHeadersArray);</p>
<p>That way foreach will accept the parameter as valid but will do nothing since the array is empty.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-105">
		<div id="comment-105">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/2b5d35a7063ab3a48bf869ff6df3bd38?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Lint Filter</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-105">
				December 31, 2008 at 2:40 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Wow S3 isn&#8217;t too frustrating&#8230;  I appreciate you making this class. I&#8217;m very surprised Amazon didn&#8217;t make this already though.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-106">
		<div id="comment-106">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-106">
				December 31, 2008 at 9:06 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Lint Filter,</p>
<p>Amazon made the <span class="caps">REST</span> <span class="caps">API</span> (and the <span class="caps">SOAP</span> <span class="caps">API</span>), and they also provided examples of those <span class="caps">API</span>s being used in various languages.  Trouble is, their example implementations are fairly basic and not particularly general-purpose.  That&#8217;s where Don&#8217;s S3 class comes in <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-107">
		<div id="comment-107">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/c6d729b032c5015eb23f2e3573a4999d?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.jplpinto.com' rel='external nofollow' class='url'>Joao Pinto</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-107">
				January 3, 2009 at 8:36 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hey guys,</p>
<p>I found out a bug on the S3 class,in the putObjectString function.<br />
Basically if you try to create an object through the putObjectString function with a numeric input, the S3 class returns a php error.<br />
So the putObjectString function should resolve these kind of issues.<br />
I propose the following:</p>
<p>public static function putObjectString($string, $bucket, $uri, $acl = self::ACL_PRIVATE, $metaHeaders = array(), $contentType = &#8216;text/plain&#8217;) {<br />
	if(!is_string($string)) {<br />
		if (is_object($string) &#038;&#038; in_array(&#8221;__toString&#8221;, get_class_methods($string)))<br />
			$string = strval($string-&#062;__toString());<br />
		else<br />
			$string = strval($string);<br />
	}<br />
	return self::putObject($string, $bucket, $uri, $acl, $metaHeaders, $contentType);<br />
}</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-108">
		<div id="comment-108">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/44ea39dcebd6c85f0114e55d7d02e488?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://traviscooper.com' rel='external nofollow' class='url'>Travis Cooper</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-108">
				January 6, 2009 at 5:41 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hey guys. I&#8217;ve got a problem.  I read in other comments about making the file private and wanting to control access to the file when downloading.  I don&#8217;t want to do the temp url thing, I&#8217;m not sure if that is secure enough (maybe it is, if so I&#8217;d like to know why <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_wink.gif" alt=";)" class="wp-smiley" /> ) but instead, I&#8217;d like to use the getObject method to grab the file information and put that into somesort of php file object and then do the file output where you create the File headers, then do a readfile($filename); and it send it to the browser.</p>
<p>I could potentially just save the file down to the hard disk, and server it up, then delete it once it&#8217;s been downloaded, but that may prove inefficient.  I&#8217;d like to just have it load in memory, never touch the hard disk, and load right into a php file object and then pump that out to the page (espically for images etc.)</p>
<p>Any thoughts?  I&#8217;d like to use the direct link to the file on amazon, i just want to make sure i can control access to the file.</p>
<p>Thanks in advance!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-109">
		<div id="comment-109">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-109">
				January 8, 2009 at 1:35 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Travis,</p>
<p>A generated temporary <span class="caps">URL</span> is about as secure as it gets.  You set the expiration time; I would suggest setting an expiration two or three minutes in the future.  Yes, the <span class="caps">URL</span> works for anyone, but only during that two minute window, and if your user wants to share the file they could just do it after downloading it anyway.</p>
<p>The best option is to control whether or not you provide the signed <span class="caps">URL</span> in the first place;  for example, I put the full version of my software in a bucket, and provide a signed temporary download <span class="caps">URL</span> for the user when they&#8217;re logged in to my website.  That is, they only get the <span class="caps">URL</span> once I&#8217;ve already verified who they are, and even then the download <span class="caps">URL</span> is only valid for a few minutes.  I can&#8217;t stop them from throwing the program up on BitTorrent or something, but that&#8217;s an impossible dream anyway.</p>
<p>I&#8217;d recommend against downloading the file to your server and then serving it to the user; you lose one of the best benefits of using S3 (which is that Amazon&#8217;s pipe is bigger than yours).</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-110">
		<div id="comment-110">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/aca1dea58128c414073b484451c49db1?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://jason.solidblog.com' rel='external nofollow' class='url'>Jason</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-110">
				January 12, 2009 at 10:24 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>No worky.</p>
<p>I hate the fact that I am posting here with problems but I just can&#8217;t make it work.</p>
<p>I get &#8220;Warning: Invalid argument supplied for foreach() in /srv/www/htdocs/upload/page.php on line 49&#8243;</p>
<p>Which isn&#8217;t a big deal. The main problem is that whenever I try to upload an image (tried many file types including jpg, jpeg, gif, etc) I get &#8220;Something went wrong while uploading your file&#8230; sorry.&#8221; With no direction as to where I went wrong.</p>
<p>I tried creating a new bucket by hand and using it, I even tried letting it create one. It&#8217;s not the bucket name cause as soon as it fails I can go and create one with the same name. There is no real error reporting with this class to help me figure it out so I have to post here.</p>
<p>Any help/guidance would be greatly appreciated.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-111">
		<div id="comment-111">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-111">
				January 16, 2009 at 12:34 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Jason,</p>
<p>If you e-mail me your code for page.php (be sure to remove your <span class="caps">AWS</span> keys!) I may be able to help you figure out what&#8217;s going on.</p>
<p><a href="mailto:heron@xnapid.com">heron@xnapid.com</a></p>
<p>- Heron</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-112">
		<div id="comment-112">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/cd31311ce9afac4fe2dd7ed8795b9d9c?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">sharad</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-112">
				January 25, 2009 at 6:09 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Used the library for the first time today. Really easy to use. I have two questions/comments</p>
<p>a) I assume it the caller&#8217;s reponsibility to retry if an InternalError is returned.</p>
<p>b) I did a putBucket on the same bucket multiple times today. They all indicated success. Should&#8217;nt I be getting a BucketAlreadyOwnedByYou ?</p>
<p>Thanks</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-113">
		<div id="comment-113">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />				<cite class="fn"><a href='http://www.apez.biz' rel='external nofollow' class='url'>David J</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-113">
				January 26, 2009 at 11:54 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Anyone know what might cause this?:</p>
<p><span class="caps">PHP</span> Warning:  S3::putObject(): [MalformedXML] The <span class="caps">XML</span> you provided was not well-formed or did not validate against our published schema in includes/S3.php on line 357</p>
<p>I can list buckets ok, but putObject with a string for the input parameter generates that (and doesn&#8217;t work).</p>
<p>Thanks.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-114">
		<div id="comment-114">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />				<cite class="fn"><a href='http://www.apez.biz' rel='external nofollow' class='url'>David J</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-114">
				January 27, 2009 at 12:06 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@David J &#8211; to answer myself <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
<p>It occurs when the bucket is the empty string.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-115">
		<div id="comment-115">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b90f2940d863e219ef05f655f6193aa8?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://angelo.mandato.com' rel='external nofollow' class='url'>Angelo Mandato</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-115">
				January 30, 2009 at 6:13 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I love this class, but I recently ran into an issue with a server that does not have any certificates installed. For situations like these, I&#8217;d like to see one or more of the suggested solutions added&#8230;</p>
<p>1: allow the user to specify a define to turn off <span class="caps">CURLOPT</span>_SSL_VERIFYPEER. e.g.</p>
<p>curl_setopt($curl, <span class="caps">CURLOPT</span>_SSL_VERIFYHOST, 1);<br />
if( defined(&#8216;S3_CLASS_SSL_VERIFYPEER&#8217;) )<br />
  curl_setopt($curl, <span class="caps">CURLOPT</span>_SSL_VERIFYPEER, S3_CLASS_SSL_VERIFYPEER);<br />
else<br />
  curl_setopt($curl, <span class="caps">CURLOPT</span>_SSL_VERIFYPEER, 1);</p>
<p>Then all a developer needs to do is add the following line to their code before using the S3 class:<br />
define(&#8216;S3_CLASS_SSL_VERIFYHOST&#8217;, 0);</p>
<p>2 and 3: Another option(s) would be to allow us to define the path for <span class="caps">CURLOPT</span>_CAINFO and/or <span class="caps">CURLOPT</span>_CAPATH so we can specify the .crt files.</p>
<p>Thanks again for a great S3 class!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-116">
		<div id="comment-116">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/3eb4787adc442c68eb8f591af04c1023?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.RADMoose.com' rel='external nofollow' class='url'>R. Moose</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-116">
				February 2, 2009 at 12:56 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Is there any way to use this class but somehow &#8216;encrypt&#8217; or &#8216;sign&#8217; an access key so that if the code gets taken, I can disable the access key only for this script?</p>
<p>The problem is that our site has multiple developers working on it and I really don&#8217;t want to just hand out the keys for everyone to have access to.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-117">
		<div id="comment-117">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-117">
				February 2, 2009 at 9:28 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@ R. Moose:</p>
<p>Unfortunately no, there is no way to do that.  If the key gets taken, you&#8217;ll simply have to generate a new keypair from your <span class="caps">AWS</span> account.</p>
<p>One solution, would be to create a web service with your own authentication mechanism that does the interaction with S3 itself.</p>
<p>However, there is a larger problem here.  If you don&#8217;t trust your developers with your access key, why do you trust them to write the code in the first place?  Being able to revoke an access key won&#8217;t prevent them from (for example) deleting the contents of your buckets, sabotaging your code, etc etc.  I&#8217;d recommend hiring trustworthy developers <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_wink.gif" alt=";)" class="wp-smiley" /></p>
<p>Non-disclosure agreements can cover this type of thing, giving you legal grounds to sue them into oblivion to recover your costs if they use such secrets to damage your company.  It also doesn&#8217;t hurt to change your access keys whenever a developer leaves the company.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-118">
		<div id="comment-118">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/8abe6a72502a6f55a2a395dab45bca59?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://espeakers.com' rel='external nofollow' class='url'>Dave</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-118">
				February 10, 2009 at 3:10 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thanks for some great work &#8212; nice to use well-done code.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-119">
		<div id="comment-119">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1d31e4d4920704e248c4394ae24cb2a7?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Ricky de Jong</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-119">
				February 10, 2009 at 11:40 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Great class!<br />
Congrats! <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_biggrin.gif" alt=":D" class="wp-smiley" /></p>
<p>I&#8217;m, sort of, disliking echoing &#8216;$s3-&#062;getAuthenticatedURL&#8217; but that&#8217;s me.</p>
<p>But talking about the expire time. Let&#8217;s say it&#8217;s set to 2 minutes. Does that mean if you download a file that would take 3 minutes to download, you will get an error after 2 minutes because of lacking access to s3?</p>
<p>Cheers!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-120">
		<div id="comment-120">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-120">
				February 11, 2009 at 2:25 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Ricky:</p>
<p>No, the download will continue as normal.  The expiration time is for the <strong>start</strong> of the download (that is, for the moment when the link is clicked).</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-121">
		<div id="comment-121">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-121">
				February 11, 2009 at 10:33 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Ricky: With regards to getAuthenticatedURL(), see what Heron said above.</p>
<p>What you want to do is create a link with getAuthenticatedURL() as the user clicks, so: /download/fileId redirects to the getAuthenticatedURL() link.  This way the link is always valid.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-122">
		<div id="comment-122">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1d31e4d4920704e248c4394ae24cb2a7?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Ricky de Jong</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-122">
				February 11, 2009 at 11:41 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thanks for your quick reply, Don and Heron <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
<p>Greets</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-123">
		<div id="comment-123">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1d31e4d4920704e248c4394ae24cb2a7?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Ricky de Jong</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-123">
				February 11, 2009 at 3:34 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Heron</p>
<p>Just a small note: the expiration time for the getAuthenticatedURL is when it&#8217;s been generated and not when you click on it <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_biggrin.gif" alt=":D" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-124">
		<div id="comment-124">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/22ade7e3b5ff9d68220814352347ccb3?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.moviestorm.co.uk' rel='external nofollow' class='url'>Ben Garrett</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-124">
				February 11, 2009 at 6:11 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi,</p>
<p>Firstly, many thanks for the class &#8211; it&#8217;s just what I was looking for.</p>
<p>Unfortunately I&#8217;m getting the same timeout errors mentioned by others in earlier posts, when calling putObjectFile. The timeout occurs trying to put a small file (less than 3k), and it&#8217;s the second putObjectFile on the same S3 object &#8211; the first call works perfectly. Any ideas?</p>
<p>Thanks!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-125">
		<div id="comment-125">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-125">
				February 11, 2009 at 9:19 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Ricky:</p>
<p>What I meant was, the expiration date determines the range of time during which the link may be clicked on.  If the link is clicked outside of that time frame, it is invalid.</p>
<p>So, the link may be clicked on (or visited in some other way) at any time between the moment it is generated and the expiration time.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-126">
		<div id="comment-126">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/28ddfabff29c92b1bb384a57915fe640?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://cloversites.com' rel='external nofollow' class='url'>Kirby</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-126">
				February 13, 2009 at 8:18 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>First, awesome resource!  Currently, I am creating a class which takes a bucket of files and matches it with its backup bucket.  If the file is not there in the backup, then it copies and pastes it in the backup bucket.  Just a simple backup program between two buckets in one S3 account.</p>
<p>I am running into a problem. The getbucket function is not grabbing all of the files in the first bucket(we have a ton).  Any idea of whats going on?  Is it the <span class="caps">PHP</span> function&#8217;s fault?  Is there a limit of how many files one can grab from a bucket?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-127">
		<div id="comment-127">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bf2fcc7b1a4fa0aff918a0787799911?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Jonathan</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-127">
				February 13, 2009 at 10:33 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I&#8217;m getting the timeout too, but only on the second file upload. What I&#8217;m doing is:<br />
1.) putObjectFile to upload (/tmp/temp.jpg)<br />
2.) resize image to make thumbnail to the same file (/tmp/temp.jpg)<br />
3.) putObjectFile to upload thumbnail (/tmp/temp.jpg)</p>
<p>If during the resize I create a new file (/tmp/temp2.jpg) then it works fine.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-128">
		<div id="comment-128">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-128">
				February 13, 2009 at 11:02 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Ben, @Jonathan: Think there is an issue with resources being locked/not cleaned up.</p>
<p>@Kirby: Will look into it.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-129">
		<div id="comment-129">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-129">
				February 14, 2009 at 3:07 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Isn&#8217;t there a &#8220;paging&#8221; sort of thing going on when you list the contents of a bucket?  That is, I was under the impression that listing the bucket contents can only happen a thousand objects at a time.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-130">
		<div id="comment-130">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/a829c40d371dae946cc57c0a20479fbc?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Kevin</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-130">
				February 16, 2009 at 7:22 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Love the code, however updated to 0.3.9 and it seems to still have issues with files of 0 bytes.  I keep getting the Missing input parameters error.  I see this was mentioned before in the comments, is this still in the todo&#8217;s?</p>
<p>Thanks.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-131">
		<div id="comment-131">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-131">
				February 17, 2009 at 12:41 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Kevin,</p>
<p>After fiddling with 0.3.9&#8217;s source for a while, I&#8217;m still finding that the only way to put a 0-byte file onto S3 is by <span class="caps">POST</span>ing directly to S3 (via an <span class="caps">HTTP</span> <span class="caps">POST</span>, that is), as described here:</p>
<p><a href="http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434&#038;ref=featured" rel="nofollow">http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434&#038;ref=featured</a></p>
<p>It&#8217;s worth noting that it&#8217;s not just 0.3.9 that has this issue with 0-byte files; the S3Fox Firefox extension won&#8217;t let you upload 0-byte files either.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-132">
		<div id="comment-132">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-132">
				February 17, 2009 at 9:51 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Kevin: With regards to 0 byte files, you can get around it by setting $requestHeaders[&#8216;Content-Length&#8217;] = 0; when using putObject().</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-133">
		<div id="comment-133">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-133">
				February 17, 2009 at 2:37 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Kirby: I had a look into this and could not reproduce your problem.  I&#8217;m inclined to think your problem is related to a memory limit or perhaps even a bug in your <span class="caps">PHP</span> or libcurl versions.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-134">
		<div id="comment-134">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/a829c40d371dae946cc57c0a20479fbc?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Kevin</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-134">
				February 17, 2009 at 8:00 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I wasn&#8217;t able to get the $requestHeaders[&#8216;Content-Length&#8217;] = 0; to work, it then just gave me another error which I don&#8217;t have in front of me, something about the method has not been implemented or something.  But I&#8217;m managing my files database locally so I&#8217;m able to adjust my logic to make everything work fine.  Thanks for doing the S3 integration for me.  <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-135">
		<div id="comment-135">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b77d50071696d1854fb28d1182667168?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Lionel Morrison</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-135">
				February 18, 2009 at 5:57 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Is there any known issues with ZendCore v2.5 install (<span class="caps">PHP</span> &#038; Apache2) and OpenSSL 0.9.8i. The <span class="caps">PHP</span> info page says everything is installed but everything seems to fail unless I pass &#8216;false&#8217; along with the S3 constructor. Other than that I have got this to work on other installs with out issue. Thanks.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-136">
		<div id="comment-136">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-136">
				February 18, 2009 at 10:07 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Lionel,</p>
<p>The third parameter to the constructor is whether to use <span class="caps">SSL</span> when communicating with S3.  If you get errors with S3 enabled, you might need to check to make sure you have updated certificates installed on the server.</p>
<p>If you&#8217;re not sure, or they look like they&#8217;re installed, you don&#8217;t lose much by using a non-<span class="caps">SSL</span> connection; there isn&#8217;t any sensitive data in the request <span class="caps">URL</span>, so unless you&#8217;re storing sensitive data there isn&#8217;t a problem.</p>
<p>If you <strong>are</strong> storing sensitive data, you should be encrypting it on your end before uploading anyway <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_wink.gif" alt=";)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-137">
		<div id="comment-137">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/4557506aa02dca8908317ae8c5b69db4?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Max</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-137">
				March 12, 2009 at 4:18 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Great peace of work!<br />
Doeas anybody know how to retrive the total number of files in a bucket? I need this for pagination&#8230;</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-138">
		<div id="comment-138">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-138">
				March 13, 2009 at 12:43 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Max: The S3 class will grab all of the items in the bucket unless you specify the max number of items to return.  There&#8217;s no way to get just the total number of items in the bucket, but you could cache the results of a single call to getBucket and paginate the results yourself (instead of using the class to do it).</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-139">
		<div id="comment-139">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/c00ede538d6c5d1df631c5c6be8244e3?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.fandoms.com' rel='external nofollow' class='url'>popnoart</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-139">
				March 25, 2009 at 1:21 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Great class, very easy to use!! Thanks a lot!</p>
<p>One question : Does anyone know how to delete a folder inside a bucket? I know how to delete the files inside the folder but I&#8217;m not able to delete the folder itself.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-140">
		<div id="comment-140">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-140">
				March 26, 2009 at 12:07 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@popnoart: Buckets can&#8217;t actually contain folders.  Some S3 clients (like S3fox) pretend there are folders based on the prefix of object names, but there aren&#8217;t really folders in buckets.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-141">
		<div id="comment-141">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/3395c32e3f5d27463d42c20bb5a84d44?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://countinin.com' rel='external nofollow' class='url'>Gerry</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-141">
				April 7, 2009 at 1:56 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>This seems like a great class, but the documentation seems a bit lacking.</p>
<p>1. In your example.php file you call putObjectFile() but in the description for putObjectFile() it calls it a &#8220;legacy function&#8221;. So I&#8217;m not sure if I should be using it or not.</p>
<p>2. The class documentation ( <a href="http://undesigned.org.za/files/s3-class-documentation/index.html" rel="nofollow">http://undesigned.org.za/files/s3-class-documentation/index.html</a> ) seems incomplete as it does have any descriptions telling me what the functions do.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-142">
		<div id="comment-142">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-142">
				April 7, 2009 at 2:31 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Gerry,</p>
<p>putObjectFile() will always exist but for additional functionality (that was added much later on) you want to be using S3::putObject(S3::inputFile()) in its place.</p>
<p>If you mouse over the method names on the documentation page there are descriptions available for each.  But you&#8217;re right, the documentation definitely needs work &#8211; although I think there is enough information available since most folks don&#8217;t have trouble figuring things out <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-143">
		<div id="comment-143">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b08b38de24def8d1ddce54f55319bb01?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://countinin.com' rel='external nofollow' class='url'>Gerry</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-143">
				April 7, 2009 at 5:39 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Yes I saw the mouse overs. Ok well let me use putObject as an example, here is the definition:</p>
<p>putObject (mixed $input, string $bucket, string $uri, [constant $acl = S3::ACL_PRIVATE], [array $metaHeaders = array()], [array $requestHeaders = array()])</p>
<p>and the mouseover description is:<br />
&#8220;Put an Object&#8221; </p>
<p>So the description didn&#8217;t add anything to what the name had already given me, I have no idea what the arguments are for or how they change what the function does. I understand how it&#8217;s hard to write descriptions for functions that you know inside out as everything seems obvious to the author, but I really have no clue as to what $metaHeaders is for. I have to look into the code and work out what everything in there does to figure it out, which kinda removes the point of having documentation.</p>
<p>=========<br />
example ripped from the php manual:<br />
mixed str_replace  ( mixed $search  , mixed $replace  , mixed $subject  [, int &#038;$count  ] )</p>
<p>This function returns a string or an array with all occurrences of [search] in [subject] replaced with the given [replace] value.<br />
=========</p>
<p>Don&#8217;t get me wrong, I&#8217;m awful with my own documentation and in telling you all this I&#8217;m learning myself about how I should document things in future.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-144">
		<div id="comment-144">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/99e9671100a62022ec8dc565fa8a984e?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">onassar</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-144">
				April 7, 2009 at 11:49 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Quick question.<br />
I&#8217;m working with some web services which automatically push content to my S3 bucket for me.</p>
<p>The problem with this, is I&#8217;m not able to set the headers (eg. Expires) since their web service automatically pushes it on my behalf.</p>
<p>Do you have any ideas on how best to retrieve an object, and set headers? I looked through your source, but didn&#8217;t notice any examples to specifically deal with an object that already exists, and changing it after it&#8217;s been put on S3.</p>
<p>Thanks.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-145">
		<div id="comment-145">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/99e9671100a62022ec8dc565fa8a984e?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">onassar</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-145">
				April 8, 2009 at 1:08 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Figured out that the way to do this is to make a call via copyObject, stating the same source uri and bucket as the destinations.</p>
<p>The exception here, being that you then must set the headers for the destination object.</p>
<p>This class doesn&#8217;t have this, and I&#8217;ve tried hacking it but it wouldn&#8217;t seem to work.</p>
<p>Any thoughts?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-146">
		<div id="comment-146">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/75d765c669913b345bf2a62c4e570a3b?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">parag</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-146">
				April 9, 2009 at 12:17 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>hi , we locate our media files at amazon s3.When a user request 4 download from Website (say x) , the file will be read at amazon &#038; putted to X. How about directly downloading the file at users location.?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-147">
		<div id="comment-147">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/965ac937aa50bdcedf173249b38256e2?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">miguel</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-147">
				April 16, 2009 at 8:15 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>This may be a silly question&#8230;are the calls this class makes secure by default or do I have to specify that somehow? I mean, can someone sniff the &#8220;secret access key&#8221; Amazon provides us or is it encrypted? Thanks, sorry to be a dummy, I am new to this! <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-148">
		<div id="comment-148">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-148">
				April 17, 2009 at 8:05 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Miguel,</p>
<p>The secret key cannot be determined by an eavesdropper, whether or not you&#8217;re using an <span class="caps">SSL</span> connection.  Don&#8217;t worry, it&#8217;s safe <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
<p>Look at the third parameter to the class constructor.  By default, the class uses <span class="caps">SSL</span> to communicate with Amazon S3.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-149">
		<div id="comment-149">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/600068a10fdb792d76a8bbc95b21d643?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">bhimrao</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-149">
				April 22, 2009 at 9:47 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>How to check expiry to the image?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-150">
		<div id="comment-150">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b1b77d4c7b303b2110edb8fd705f0778?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://jungleg.com' rel='external nofollow' class='url'>Jorge Escobar</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-150">
				May 5, 2009 at 6:52 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi Don,<br />
First of all great work!<br />
I just wanted to let you know that when I try to use the putObjectString, the request hangs for 2 &#8211; 3 minutes and then returns true finally.</p>
<p>This is the code I&#8217;m trying:</p>
<p>    //put body on S3<br />
    require_once(<span class="caps">LIBRARY</span>_PATH . &#8220;/s3/S3.php&#8221;);<br />
    $s3 = new S3(<span class="caps">AWS</span>_ACCESS_KEY_ID, <span class="caps">AWS</span>_SECRET_ACCESS_KEY);</p>
<p>    if($s3-&#062;putObjectString(&#8220;hello loco&#8221;, &#8216;blovelspot&#8217;, &#8216;test/loco2.html&#8217;))<br />
      {<br />
        print &#8220;success&#8221;; die;<br />
      }<br />
    else<br />
      {<br />
        print &#8220;fail&#8221;; die;<br />
      }</p>
<p>Any ideas what I&#8217;m doing wrong?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-151">
		<div id="comment-151">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/ef0a109c5108a67c6ec0496a316bb31d?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">bhimrao</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-151">
				May 6, 2009 at 2:50 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>How are you checking expires headers?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-152">
		<div id="comment-152">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-152">
				May 7, 2009 at 3:33 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@bhimrao: To which headers are you referring?</p>
<p>@Jorge: Can you duplicate the issue on another computer (preferably using a different <span class="caps">ISP</span>)?  I haven&#8217;t seen anything similar.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-153">
		<div id="comment-153">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/ef0a109c5108a67c6ec0496a316bb31d?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">bhimrao</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-153">
				May 8, 2009 at 12:36 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>i want to check the given expires header to the image<br />
that it is properly given or not</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-154">
		<div id="comment-154">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b1b77d4c7b303b2110edb8fd705f0778?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://jungleg.com' rel='external nofollow' class='url'>Jorge Escobar</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-154">
				May 12, 2009 at 1:30 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi Heron,<br />
I am doing this from an Amazon EC2 instance, so I&#8217;m sure it&#8217;s not related to the <span class="caps">ISP</span>. I did read in some Amazon forums there was some hanging on some file uploading operations  when the files are not images but text (the objects I&#8217;m trying to upload are <span class="caps">HTML</span> files), so what I ended doing was saving the <span class="caps">HTML</span> object first on the /tmp directory of the instance and then doing a putObjectFile. That works perfectly, so I&#8217;m sticking with it.</p>
<p>Thanks again for a wonderful library!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-155">
		<div id="comment-155">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fab848c4148147ad722ab49c4d1c34a8?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Frank Unwin</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-155">
				May 12, 2009 at 12:32 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>What an excellent and simple implementation. First impressions are fantastic, not tried all the features.<br />
Many thanks for your contribution.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-156">
		<div id="comment-156">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-156">
				May 13, 2009 at 6:28 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Jorge:  I&#8217;m glad you&#8217;ve got it working.  Come to think of it, I don&#8217;t think I&#8217;ve ever used putObjectString.  I&#8217;ll pester Don into testing it sometime <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_wink.gif" alt=";)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-157">
		<div id="comment-157">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/a69c55f7f2ad1cca62a22c96b906d282?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Kevin</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-157">
				May 17, 2009 at 5:49 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Great stuff but how do I just list files in a subfolder of bucket. e.g.<br />
$bucketName=&#8220;thebucket&#8221;;// but what i really need is thebucket/this/that/theother&#8221;;</p>
<p>$contents = $s3-&#062;getBucket($bucketName);<br />
print_r($contents); // too much info &#8211; just want a sub listing! <br />
Thanks<br />
Kevin</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-158">
		<div id="comment-158">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-158">
				May 19, 2009 at 6:57 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Kevin,</p>
<p>S3 doesn&#8217;t support folders.  Clients like S3Fox only <strong>imitate</strong> folders for convenience; as a result, this S3 class doesn&#8217;t support folders either.</p>
<p>The best thing you can do, therefore, is use the $prefix parameter to getBuckets.</p>
<p>For example:</p>
<p>print_r($s3-&#062;getBucket($bucketName, &#8216;this/that/&#8217;));</p>
<p>This would list the objects in $bucketname whose names start with &#8216;this/that/&#8217; (which is how S3Fox emulates folders).</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-159">
		<div id="comment-159">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/2cdf89535c269848b03f314ca8f4ca19?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Kevin Yeandel</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-159">
				May 26, 2009 at 4:57 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hello again,<br />
A little question, what&#8217;s the best way to move a file &#8211; I would rather not get and put. e.g. mv, unlink/link if it is possible. Many thanks for this code.<br />
Kevin</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-160">
		<div id="comment-160">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/15fffe19fdfecd86fdcdac9b5bd7a293?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Steve</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-160">
				May 31, 2009 at 11:02 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Amazing Amazon S3 Class!</p>
<p>Is there a way to to use wild cards in deleteobject? i.e. Somthing like; deleteObject($bucketName, &#8216;this/that/*.mp4&#8242;)</p>
<p>Also is it possible to copy from a bucket in one account to bucket in a different account? (I own both accounts.)</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-161">
		<div id="comment-161">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-161">
				June 4, 2009 at 2:02 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Kevin: You cannot &#8220;move&#8221; an object; there is nowhere to move it from or to.  A bucket is simply a collection of objects, an object is either in the bucket or it is not.  You can copy it from a bucket to the same bucket with a different name, and then delete the old object, and that&#8217;s as close as you can get to renaming it.</p>
<p>Steve: To your first question, no, you cannot use wildcards.  S3 is not a file system and does not understand wildcards.</p>
<p>You cannot directly copy from a bucket in one account to a bucket in another account using a single S3 service call; you&#8217;ll have to download it from the first account and upload it to the second account.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-162">
		<div id="comment-162">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/15fffe19fdfecd86fdcdac9b5bd7a293?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Steve</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-162">
				June 4, 2009 at 8:53 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Kevin &#8211; Thanks. My bad. Perhaps I didn&#8217;t ask the right question for my first question. How about Something like; DeleteObjects($bucketName,&#8217;/this/that)</p>
<p>For example I upload 150 objects (from my PC)to S3 and catalog them in a database. Then to delete them I iterate through them thus;</p>
<p> While($row = mysql_fetch_array($result)) </p>
<p>{</p>
<p>  $filename = $row[&#8220;FileName&#8221;] . &#8220;.mp4&#8221;;</p>
<p>$S3File = S3Folder/$filename&#8221;;<br />
$s3-&#062;deleteObject($S3B,$S3File); </p>
<p>}</p>
<p>This takes 48 seconds.  However do to the same thing from my PC using:</p>
<p>&#8220;rescmd s3 delete-objects aws-key:<span>awskey</span> aws-secret:<span>awssecretkey</span> bucket:<span>S3B</span>  key-prefix:S3Folder&#8221; </p>
<p>takes only 8 seconds.</p>
<p>I&#8217;m not sure what rescmd does in this case but I can&#8217;t think that first its requesting a listing of all objects in the bucket with the prefix then making all the individual delete operations 6 times faster than my php script. Does it?</p>
<p>That&#8217;s too bad about not being able to copy to another account. What do people to for backup? In the hopefully unlikely case that my secret key is discovered it would be nice to have my stuff backed up in another account without the hassle of first downloading them to someplace else and then uploading again to S3. What a needless carbon footprint that produces. <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":-)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-163">
		<div id="comment-163">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-163">
				June 4, 2009 at 11:30 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>As far as backups go, you don&#8217;t need to worry about that; S3 handles redundancy and availability for you.  Your data is stored on multiple physical drives in multiple geographically separated data centers (at least, that&#8217;s my understanding).</p>
<p>As far as your secret key goes, well, keep it secret <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />  But if it does get discovered, you can just log in to your Amazon <span class="caps">AWS</span> account and get a new key (which erases your old one).  No need to maintain (or pay for) a second <span class="caps">AWS</span> account.</p>
<p>I&#8217;ll e-mail the S3 devs and ask them the best way to delete multiple files like that <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-164">
		<div id="comment-164">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-164">
				June 4, 2009 at 11:53 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>The S3 <span class="caps">API</span> only supports deleting one file at a time.  I suspect the reason using the S3 class takes so much longer than rescmd is that the S3 class re-creates an internal object and re-initiates a connection with curl for every call to deleteObject, where as (I suspect) rescmd does not.</p>
<p>This isn&#8217;t really a <strong>bad</strong> thing, but it&#8217;s not optimal if you&#8217;re calling deleteObject two hundred times in a row.</p>
<p>Maybe I&#8217;ll write a function to do batch deletes more efficiently later.  I&#8217;m at work right now <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_wink.gif" alt=";)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-165">
		<div id="comment-165">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/15fffe19fdfecd86fdcdac9b5bd7a293?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Steve</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-165">
				June 5, 2009 at 9:24 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Heron. Thanks for looking into optimizing deleteObject that would be great. The other issue about backup I understand that S3 has storage redundancy but that just protects the data thats there. If someone got the key and delete files then they are gone right? </p>
<p>[slightly off topic mode on:]<br />
(This is why I&#8217;m worried about backup and why I&#8217;d like to be able to copy to a separate S3 account.)<br />
I&#8217;m playing with some stuff that allows multiple users to upload stuff to my S3 account. I haven&#8217;t (yet) figured out how to set up &#8216;signed&#8217; uploads.  I&#8217;m close using this (<a href="http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434" rel="nofollow">http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434</a>) approach. I can generate the encoded policy and signature but can&#8217;t figure out how to get a command line utility to do the html post forms but I am making some progress. (<a href="http://www.autohotkey.com/forum/viewtopic.php?t=44844" rel="nofollow">http://www.autohotkey.com/forum/viewtopic.php?t=44844</a>) so what I&#8217;ve done in the interim (really bad idea but used to test the rest of the application for now) is encode my secret key and when the user wants to upload the client requests the encoded key, decodes it and uploads the files. (the key is never saved in a file but still a bad idea) So I&#8217;m struggling with this a bit. (Until I get past the interim solution I was thinking of copying all the files to another S3 account that has a more secure key.)</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-166">
		<div id="comment-166">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-166">
				June 6, 2009 at 9:16 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Steve,</p>
<p>Yes, if someone deletes the files, they&#8217;re gone.  Amazon does not keep extra backup copies anywhere.</p>
<p>I do <span class="caps">HTTP</span> <span class="caps">POST</span> form uploads myself fairly often; if you control the server there is no reason for the end-user to ever have possession of your secret key.  However, if you&#8217;re wanting a command-line utility to do the uploads, you may consider writing your own web-based <span class="caps">API</span> that the command-line utility can hit instead of trying to post directly to S3.  That way you can have separate credentials for each user (your web <span class="caps">API</span> would ask for those), and you wouldn&#8217;t ever have to give end-users your secret key.</p>
<p>I realize writing your own web <span class="caps">API</span> with credentials isn&#8217;t trivial, but it&#8217;s not too difficult either; it may be the best solution to your problem, assuming you have access to a web server on which to run your <span class="caps">API</span>.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-167">
		<div id="comment-167">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/c0f2808288141a8a1394f98dce012b62?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Fabrizio</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-167">
				June 23, 2009 at 10:24 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Is it possible to set a  bandwidth limit for files upload?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-168">
		<div id="comment-168">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-168">
				June 24, 2009 at 6:29 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Fabrizio, that&#8217;s not something that is controlled by the S3 class.</p>
<p>Depending on how you&#8217;re uploading the file, you might be able to control it through apache or php, or even your operating system or router, but it&#8217;s not something we can really help you with, sorry.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-169">
		<div id="comment-169">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/245734ec42fc5f9263c5bf4a82699ba9?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">sakthi</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-169">
				August 18, 2009 at 3:32 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi,</p>
<p>I have tried your code, but i got the following warning without result.</p>
<p>Warning: S3::listBuckets(): [RequestTimeTooSkewed] The difference between the request time and the current time is too large. in S3.php on line 90</p>
<p>can you please check and let me know.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-170">
		<div id="comment-170">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.xnapid.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-170">
				August 18, 2009 at 7:56 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>sakthi,</p>
<p>You&#8217;ll want to make sure that the time on the machine running the PHP is set up correctly.  (If it&#8217;s 15:00 UTC, the machine&#8217;s clock should be set accordingly, with the proper time zone if necessary.)</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-171">
		<div id="comment-171">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/8f707ee742942503c94ead549a308102?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.lchsoft.net' rel='external nofollow' class='url'>Lars Christian</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-171">
				August 25, 2009 at 10:57 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>First of all, thanks for a great class, I&#8217;ve used to create a script that mirrors a local folder structure to an S3 bucket.</p>
<p>But running this on lagre folder, say ~4000 files all in all, fails. The php script eats up all the memory to the point that all the virtual machine does i swapping. Top reports mem usage well above 90% for the PHP sync job.</p>
<p>Have you made any attempts helping the garbage collecotr free up memory using destructors and unsets?<br />
Have anyone else encountered this memory problem?</p>
<p>Regards,<br />
Lch</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-172">
		<div id="comment-172">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-172">
				August 25, 2009 at 9:28 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Lars: Heron and I are going to look into this.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-173">
		<div id="comment-173">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/43d86ef7bcc91a33603df774439aab6c?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Troy Hakala</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-173">
				August 28, 2009 at 6:10 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I get the following error every single time I try to upload large (&#062;200MB) files:</p>
<p>Warning: S3::putObject(): [55] select/poll returned error in S3.php on line 358</p>
<p>It sends data for a while and then the network traffic drops to zero and 30 seconds later or so it fails with the above error message.</p>
<p>I&#8217;m using version 0.4.0 of S3.php, libcurl 7.19.5 and PHP 5.2.6 on Debian.  </p>
<p>Anyone else have this problem? Anyone know of a solution?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-174">
		<div id="comment-174">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-174">
				August 28, 2009 at 8:20 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Troy,</p>
<p>Do you have access to another machine?  I&#8217;d like to know if you have the same problem uploading the same file from a different machine (preferably a different OS).  That could help narrow down where the problem is (differences in kernel versions, libcurl verisons, etc etc.)</p>
<p>Next time I boot into Linux I&#8217;ll try uploading a large file and see what happens.</p>
<p>I can say, however, that my previous employer regularly uploaded 200+MB files without issues from a machine running Gentoo Linux.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-175">
		<div id="comment-175">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/43d86ef7bcc91a33603df774439aab6c?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Troy Hakala</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-175">
				August 28, 2009 at 9:56 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I have another linux box that I also use to upload to S3 and the versions are mostly the same but libcurl is 7.18.2 and the same thing occurs on that machine. I don&#8217;t have any linux machine that is significantly different from these two as I generally keep up-to-date on all of them. </p>
<p>I was assuming that it was a problem with S3 but I can use a different S3 client on a Mac that doesn&#8217;t use libcurl (it uses OS X&#8217;s NSURL* classes) and it uploads the large files successfully.</p>
<p>I can give you an strace, if that helps.</p>
<p>FWIW, I found someone else reporting the same problem and there&#8217;s supposedly a solution to it but I&#8217;m not a paying member of experts-exchange.com so I can&#8217;t see the solution:</p>
<p><a href="http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/Q_24551457.html" rel="nofollow">http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/Q_24551457.html</a></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-176">
		<div id="comment-176">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/9d0ca9fa539cb7c766840ff18b3be89a?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://bastiaanfronik.com' rel='external nofollow' class='url'>Bastiaan Fronik</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-176">
				September 4, 2009 at 11:23 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>For those of you who run out of memory when uploading loads of files (using putObjectFile). Try to disable $useSSL (S3::$useSSL = false;).</p>
<p>My memory use dropped dramatically. It seems like something is leaking when using ssl.</p>
<p>Otherwise a very nice written class!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-177">
		<div id="comment-177">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fde04f0b02b4438cf370fbc2e63c4ffb?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">alex</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-177">
				October 6, 2009 at 11:35 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I have this problem.<br />
When I upload multiple files simultaneously on amazon s3 photos are uploaded less than you selected.<br />
Example load at once 15 pictures on amazon s3 but I have only 10<br />
Why?<br />
There are settings timeout or other? </p>
<p>thanks<br />
alex</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-178">
		<div id="comment-178">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-178">
				October 8, 2009 at 9:23 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>alex,</p>
<p>Are you uploading them one by one?  If not, how are you uploading them?  Are you checking the return value of putObject to make sure it succeeded?</p>
<p>&#8211; Heron</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-179">
		<div id="comment-179">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fde04f0b02b4438cf370fbc2e63c4ffb?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">alex</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-179">
				October 13, 2009 at 5:45 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>i have resolved the problem but now when i upload the file, it is impossibile to upload file over 2 Megabyte.</p>
<p>Why?</p>
<p>Is there a solution to increase this limit?<br />
depends Amazon S3 or S3 class?</p>
<p>thanhs</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-180">
		<div id="comment-180">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-180">
				October 13, 2009 at 5:57 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Alex:</p>
<p>Have you checked your INI settings to make sure there are no memory limits?</p>
<p>Try disable SSL (S3::$useSSL = false) &#8211; should give you unbuffered uploads.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-181">
		<div id="comment-181">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/d51c4b498ec1658834213defea5eed7a?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Paul</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-181">
				October 21, 2009 at 10:02 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>is it possibile to set in the s3.php , privacy policy the max file size to upload?</p>
<p>thanks</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-182">
		<div id="comment-182">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/e2553b9f557f130b2ce9d525ed279c41?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://extendwerks.com' rel='external nofollow' class='url'>Mike P.</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-182">
				October 22, 2009 at 5:49 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Great Class &#8211; Thanks!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-183">
		<div id="comment-183">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b62c056db161435ea023476913222820?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Para</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-183">
				November 1, 2009 at 9:21 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hello,</p>
<p>I am trying to use this class to check if a folder inside a bucket is empty or not.<br />
Does anyone have any idea how I could do that?<br />
thanks in advance</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-184">
		<div id="comment-184">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-184">
				November 1, 2009 at 10:58 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Para,</p>
<p>There is no such thing as a &#8220;folder&#8221; in S3.  Folders are emulated by simply adding a prefix to an object name; for example, I might name an object &#8220;pictures/me.jpg&#8221;.  Some clients (like S3Fox) treat that as a file named &#8220;me.jpg&#8221; in a folder named &#8220;pictures&#8221;, but that&#8217;s not how S3 itself treats things.</p>
<p>As a result, Don&#8217;s S3 class only sees objects including their prefixes.  If you want to do the search yourself, simply list the contents of the bucket, and search for any that include the desired &#8220;folder&#8221; name in the object name.</p>
<p>I hope that makes sense <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
<p>&#8211; Heron</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-185">
		<div id="comment-185">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/63ef21ac5ab2ee95f7c4554129926d54?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Naerk</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-185">
				November 1, 2009 at 11:51 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hello,</p>
<p>I have a problem with $s3-&#062;putObjectFile($uploadTmpFile, $bucketName, baseName($fileName), S3::ACL_PRIVATE</p>
<p>If i use small files like 2 MB, everything is great. But if the file is bigger than 12 MB it loads a long time and then i get a timeout.</p>
<p>If i uncomment the putObjectFile, my webserver has no problems to load files of 80 MB in php tmp dir.</p>
<p>Any ideas?</p>
<p>thanks<br />
Naerk</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-186">
		<div id="comment-186">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-186">
				November 3, 2009 at 1:55 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Naerk,</p>
<p>Have you tried uploading a file directly to your webserver some other way (i.e. through FTP) and then seeing if putObjectFile can upload that file?</p>
<p>If you can try that, it will help narrow down the cause of the issue.</p>
<p>Thanks,<br />
Heron</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-187">
		<div id="comment-187">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/c8ccfb96a5dc39c239c7ef8910147532?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Tommy</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-187">
				November 4, 2009 at 3:01 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi,</p>
<p>From the above comments I understand that your script is working fine.. But I am having an error when I apply this in my website. The program I put on the user side, here my plan is to upload the user profile images automatically to amazon.</p>
<p>I am using <a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class" rel="nofollow">http://undesigned.org.za/2007/10/22/amazon-s3-php-class</a>  script for uploading files to amazon s3. The buckets are listing properly but I am not able to upload files to buckets. I am getting the error,</p>
<p>S3::putObject(): [60] SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed</p>
<p>and upload fails.</p>
<p>Also not able to create new buckets too.</p>
<p>Any solution..</p>
<p>Thanks in Advance ..</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-188">
		<div id="comment-188">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f3df43c072f257563c84b9955b497b6b?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Ian Anderson</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-188">
				November 6, 2009 at 6:14 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Tommy &#8211; it might be trying to use SSL &#8211; if you set the third parameter to false when instantiating S3, this might help</p>
<p><code><span class="source-html">class&#160;My_Service_Amazon_S3&#160;extends&#160;S3<br />{<br />&#160;&#160;&#160;&#160;public&#160;function&#160;__construct(<span class="source-variable">$awsUserKey</span>,&#160;<span class="source-variable">$awsPrivateKey</span>,&#160;<span class="source-variable">$useSSL</span>&#160;=&#160;false)<br />&#160;&#160;&#160;&#160;{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;parent::__construct(<span class="source-variable">$awsUserKey</span>,&#160;<span class="source-variable">$awsPrivateKey</span>,&#160;<span class="source-variable">$useSSL</span>);<br />&#160;&#160;&#160;&#160;}&#160;&#160;&#160;&#160;<br />}</span></code></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-189">
		<div id="comment-189">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/547fa9c3bc520bca42f4ad120ba26b1c?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Niro</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-189">
				November 8, 2009 at 1:36 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Excellent class! thank you very much Don.</p>
<p>I&#8217;m having the large file problem mentioned in earlier posts (Nic, Sven, Bryan). My files are 450MB in size. And the upload is from Linux virtual private server to S3 using putObjectFile. The symptoms are that the cpu consumption is stuck at 100% for HTTPD process.</p>
<p>The information I could find here suggests that some setting of PHP/Apache/Curl are causing time out.</p>
<p>Can anyone suggest which configurations to check? or other way to find out the exact reason?</p>
<p>Thanks, Niro</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-190">
		<div id="comment-190">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-190">
				November 8, 2009 at 1:59 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Nori: SSL can cause some problems when uploading large files.  Because the stream is encrypted, files need to be loaded into memory &#8211; and the 100% CPU usage you&#8217;re seeing is most likely the encryption.</p>
<p>If you don&#8217;t need SSL, don&#8217;t use it.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-191">
		<div id="comment-191">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/547fa9c3bc520bca42f4ad120ba26b1c?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Niro</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-191">
				November 8, 2009 at 2:38 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thanks Don, I tried it without SSL and it still gets stuck. </p>
<p>Any other suggestions?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-192">
		<div id="comment-192">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f3df43c072f257563c84b9955b497b6b?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Ian Anderson</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-192">
				November 11, 2009 at 2:43 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Awesome class, Don &#8211; it&#8217;s saving us masses of time. I&#8217;m writing a PHP class to sync our buckets to a local server for backup purposes, and I have a question regarding subfolders</p>
<p>I have made it so that my script attempts to create a folder with the name of any &#8220;subfolder&#8221; objects returned by S3, and in my testing S3 has always returned them in the right order so that an object with name</p>
<p>folder1/folder2/folder3/foo.txt</p>
<p>always appears in your listing after the &#8220;folders&#8221;</p>
<p>folder1/<br />
folder1/folder2/<br />
folder1/folder2/folder3/<br />
folder1/folder2/folder3/foo.txt</p>
<p>Will it always return the &#8220;subfolders&#8221; in the correct order as above?</p>
<p>i.e. can I trust it not to try to save a file into a folder I haven&#8217;t created yet?</p>
<p>Many thanks indeed</p>
<p>Ian Anderson</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-193">
		<div id="comment-193">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f3df43c072f257563c84b9955b497b6b?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Ian Anderson</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-193">
				November 11, 2009 at 2:44 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Niro &#8211; How much RAM does your virtual server have? Maybe it&#8217;s going into swap</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-194">
		<div id="comment-194">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/c8ccfb96a5dc39c239c7ef8910147532?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Tommy</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-194">
				November 11, 2009 at 3:48 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thank you Ian Anderson.. Thanks for your reply !! Problem solved..</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-195">
		<div id="comment-195">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f57e2cfc69e45b9b29eb700546c69ba2?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Anoop</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-195">
				November 11, 2009 at 6:12 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Great Script !! and nicely written. Thanks.<br />
I have a small issue, how can I put files to sub-folders. ?<br />
Eg:/ I want to store a file to bucket/sub-bucket1/sub-bucket2/. Here how can I store to &#8216;sub-bucket2&#8242; ? </p>
<p>Thanks in advance..</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-196">
		<div id="comment-196">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/833262925bd43cb65509d59372d46dbc?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Niro</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-196">
				November 25, 2009 at 9:31 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Ian,</p>
<p>The server has total 1.8G, 400M used and about 1.4G free</p>
<p>Also added to the script<br />
ini_set(&#8216;memory_limit&#8217;, &#8216;128M&#8217;);</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-197">
		<div id="comment-197">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/833262925bd43cb65509d59372d46dbc?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Niro</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-197">
				November 25, 2009 at 9:40 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Ian, Just run a test (looking at top while the file transfer is supposed to happen). Definately not a swapping issue.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-198">
		<div id="comment-198">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b62c056db161435ea023476913222820?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Para</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-198">
				November 26, 2009 at 11:58 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hello,<br />
I have a question.<br />
Is there any way to get traffic statistics for an amazon s3 account(total downloaded bytes and total downloaded bytes) using this library?</p>
<p>Thank you in advance</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-199">
		<div id="comment-199">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-199">
				November 26, 2009 at 12:30 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Niro: Remember that you&#8217;d need to set the memory limit in php.ini &#8211; if you are posting files also remember to the set post_max_size INI directive.  Does seem to be memory lated though.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-200">
		<div id="comment-200">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-200">
				November 26, 2009 at 12:37 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Para: There is, which is why the class contains some functionality for logging.  I&#8217;ve been working on a S3 statistics app using this class &#8211; right now it parses S3 logs and stores the data in MySQL.  I&#8217;ll try get around to packaging it for release in the next few days.  Wanted to release it with a GUI but can&#8217;t find the time for that at the moment.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-201">
		<div id="comment-201">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b62c056db161435ea023476913222820?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Para</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-201">
				November 26, 2009 at 1:43 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I would really only need the total ammount of bytes downloaded and the total ammount downloaded? what function should I use I didn&#8217;t find one that handeled this?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-202">
		<div id="comment-202">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-202">
				November 26, 2009 at 2:21 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Para: There is no function to do what you need.  See the <a href="http://docs.amazonwebservices.com/AmazonS3/latest/index.html?ServerLogs.html" rel="external nofollow" rel="nofollow">logging documentation</a>.  The class lets you enable/disable logging.  You would still need to download those logs and parse them accordingly.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-203">
		<div id="comment-203">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1d5c2531ec51bac60d3ae9cc1a722a5c?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">cjsewell</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-203">
				November 30, 2009 at 11:16 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi there, I am trying to get the total size of a bucket, so far the only way I can do it is by looping through the response of getBucket.<br />
This works, but is extremely slow, especially for large buckets.<br />
Is there any better, faster way?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-204">
		<div id="comment-204">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-204">
				November 30, 2009 at 11:27 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@cjsewell: Unfortunately that&#8217;s the only way.  Better way might be to maintain a local SQL based listing for buckets and use that to calculate sizes.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-205">
		<div id="comment-205">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/28ddfabff29c92b1bb384a57915fe640?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Kirby</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-205">
				December 4, 2009 at 10:49 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi-</p>
<p>I am creating a jpg bytearray in actionscript, passing it to php, and attempting to upload to the S3 using putObject.  Unfortunately, I get stuck with an error that says &#8220;MalFormed XML&#8230;&#8221; I tried looking at the other threads but they weren&#8217;t clear on their answers.  Here is my code:</p>
<p>//it passings a jpg bytearray name &#8220;jpgData&#8221;</p>
<p>$s3 = new S3($awsAccessKey, $awsSecretKey);</p>
<p>$filename = &#8220;test.jpg&#8221;;<br />
$input = array();<br />
$input[&#8220;data&#8221;] = $jpgData-&#062;data;<br />
$input[&#8220;type&#8221;] = &#8220;image/jpg&#8221;;</p>
<p>return $s3-&#062;putObject($input, &#8220;storage.kirbysbeard.com&#8221;, $fileName, &#8220;public-read&#8221;);</p>
<p>Any ideas?  Thanks and your class is awesome!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-206">
		<div id="comment-206">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/9aca70f41c2f1cd1aacc64a4fe6a4b46?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">laxmikant</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-206">
				December 8, 2009 at 7:27 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>how i can create sub folder plz help me</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-207">
		<div id="comment-207">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1d5c2531ec51bac60d3ae9cc1a722a5c?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.dennissystems.net' rel='external nofollow' class='url'>Corey Sewell</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-207">
				December 9, 2009 at 8:48 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi, I found a faster way to get sizes of buckets. I ended up making a class for downloading and parsing the reports you get from the AWS portal.<br />
Its related to your class so thought I would share. You can find out more here:<br />
<a href="http://amazontools.blogspot.com/2009/12/first-alpha-release.html" rel="nofollow">http://amazontools.blogspot.com/2009/12/first-alpha-release.html</a><br />
Cheers</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-208">
		<div id="comment-208">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/9aca70f41c2f1cd1aacc64a4fe6a4b46?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">laxmikant</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-208">
				December 9, 2009 at 12:43 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>thanks buddy</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-209">
		<div id="comment-209">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/9aca70f41c2f1cd1aacc64a4fe6a4b46?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">laxmikant</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-209">
				December 9, 2009 at 12:49 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>in one bucket i m not able to uplaod the files by same code i m able to upload the file  in another bucket. what&#8217;s reason any one can help me</p>
<p>Any ideas? Thanks</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-210">
		<div id="comment-210">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-210">
				December 10, 2009 at 5:06 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>laxmikant:  Do you have write permissions in the bucket you&#8217;re trying to write to?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-211">
		<div id="comment-211">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f3df43c072f257563c84b9955b497b6b?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Ian Anderson</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-211">
				December 10, 2009 at 10:52 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I have a complaint to make &#8211; it&#8217;s working too well and I don&#8217;t understand why <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
<p>When I call getBucket(), as I understand things, it should only receive 1000 objects from Amazon and the truncated property should be set to true so that I know to call it again</p>
<p>But I&#8217;m receiving all the objects in my bucket anyway &#8211; about 1400 &#8211; and the truncated property is still set to true</p>
<p>Does anyone else get this?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-212">
		<div id="comment-212">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f3df43c072f257563c84b9955b497b6b?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Ian Anderson</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-212">
				December 10, 2009 at 11:22 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Ah &#8211; I think I see the magic that does it, sorry</p>
<p>do { &#8230; }   while ($response !== false &#038;&#038; (string)$response-&#062;body-&#062;IsTruncated == &#8216;true&#8217;);</p>
<p>When I echo out a marker at the top of the loop it only gets echoed once though, and it should get echoed twice &#8211; weird. But it works brilliantly &#8211; thanks once again, Don</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-213">
		<div id="comment-213">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-213">
				December 10, 2009 at 8:10 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Ian,</p>
<p>getRequest actually retrieves responses in two different places.  Right above the do-while loop is an if statement that checks if the first response was truncated, and if so, it enters the loop, where it checks for further responses.</p>
<p>Does that make sense?</p>
<p>&#8211; Heron</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-214">
		<div id="comment-214">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fbec42f2761e00df6caf473ce6d77684?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">ilija</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-214">
				December 13, 2009 at 3:19 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi, </p>
<p>I am little bit confused with REST api and how to use it.<br />
My concern is if using this script file will get downloaded<br />
to server first before going to a client browser or is it a way to download file from s3 to client browser directly.<br />
I am looking for a way to skip double bandwidth (from s3 to serevr-&#062;server to client).</p>
<p>Thank you.</p>
<p>I.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-215">
		<div id="comment-215">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-215">
				December 14, 2009 at 12:32 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>ilija:</p>
<p>This S3 class only allows client-&#062;server-&#062;Amazon S3 transfers.  If you want client-&#062;Amazon S3 transfers, you&#8217;ll want to set up an upload form using POST.</p>
<p>Read this example:</p>
<p><a href="http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1618" rel="nofollow">http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1618</a></p>
<p>Hope that helps.</p>
<p>&#8211; Heron</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-216">
		<div id="comment-216">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/a94f07b6f901ace75579d8780898f780?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Khanh</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-216">
				December 14, 2009 at 11:50 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thank you so much for such a useful class.  I was able to use this class as expected to upload files to S3. I am running into an issue with any files larger then 10mb.  I&#8217;ve changed the upload size in php to 20mb and still no luck.  There are no errors being kicked back either.</p>
<p>$s3-&#062;putObjectFile($fileTempName, $dest_bucket, $fileName, S3::ACL_PUBLIC_READ)</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-217">
		<div id="comment-217">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/00cabc96a2d0061b03e4b265b9555f8c?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.youtorrent.com' rel='external nofollow' class='url'>Yousef</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-217">
				December 21, 2009 at 10:39 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Khanh, we were having the same problem so we tried all the usual PHP changes (post_max_size, upload_max_filesize, memory_limit, max_execution_time). None of them helped&#8230; In the end we figured out it was the Apache timeout stopping the script completing. Now it&#8217;s working fine for 50MB files. We&#8217;ll be trying larger ones later.</p>
<p>Great class by the way!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-218">
		<div id="comment-218">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/ac94d686ba625777fe45c30a215f19fb?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Hugo</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-218">
				January 7, 2010 at 9:44 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Is there a way  to append a string to the name of the file while uploading it to the S3 server? ie: file to upload using the html form = my_file.txt once uploaded would become 1_my_file.txt</p>
<p>Thank you</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-219">
		<div id="comment-219">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/d12bc7e9e1a467895a71ef4a15ccf6ad?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Luk</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-219">
				January 16, 2010 at 8:02 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi,</p>
<p>I just started to use this class, and I am having problems with example-cloudfront.php.</p>
<p>Warning: S3::listDistributions(): [60] SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed in S3.php on line 935</p>
<p>Even when I try to change the resource to 2009-12-01/distribution, the warning is the same. When I try to set $useSSL to false, I cannot obviously connect to the host&#8230; Besides, I can use listBuckets() only with disabled SSL, so I am not really sure what is wrong, or what could help.</p>
<p>Any ideas?<br />
Thanks,<br />
Luk</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-220">
		<div id="comment-220">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/d12bc7e9e1a467895a71ef4a15ccf6ad?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Luk</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-220">
				January 16, 2010 at 8:21 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi again :),</p>
<p>is it correct, this class doesn&#8217;t support creating/listing/updating/deleting streaming distributions, or am i missing something??</p>
<p>Thank you, Luk</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-221">
		<div id="comment-221">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/cc0caf565a7aeee3e3caf6198945de39?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Arifcsecu(Bangladesh)</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-221">
				January 23, 2010 at 9:50 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>i got this error. i don&#8217;t understand why this happen?</p>
<p>Warning: S3::putObject(): [60] SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed in C:xampphtdocsS3.php on line 358<br />
Something went wrong while uploading your file&#8230; sorry.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-222">
		<div id="comment-222">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/cc0caf565a7aeee3e3caf6198945de39?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Arifcsecu(Bangladesh)</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-222">
				January 24, 2010 at 2:31 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>when i sent<br />
    S3::$useSSL = false;<br />
    $s3-&#062;putBucket($bucket,S3::ACL_PRIVATE);<br />
i got the error.                 </p>
<p>Warning: S3::putBucket(abc, private, ): [RequestTimeTooSkewed] The difference between the request time and the current time is too large. in C:xampphtdocsnpS3.php on line 226</p>
<p>Warning: S3::putObject(): [RequestTimeTooSkewed] The difference between the request time and the current time is too large. in C:xampphtdocsnpS3.php on line 358<br />
Something went wrong while uploading your file&#8230; sorry.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-223">
		<div id="comment-223">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-223">
				January 25, 2010 at 1:44 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi Arifcsecu,</p>
<p>Amazon S3 uses time to verify signatures; if the sigature says &#8220;10:00 am GMT&#8221; but it&#8217;s actually 5:00pm GMT Amazon will reject the request.</p>
<p>Make sure the computer running the script has its time set properly &#8211; either set it to the correct GMT time, or set the time and the timezone properly for its location.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-224">
		<div id="comment-224">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/dbfbc860cdfd67e0082e2d21ec9c3b03?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Liam</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-224">
				January 26, 2010 at 6:29 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I have just started using your S3 class and when I try to upload a file I recieve the following error: &#8220;S3::inputFile(): Unable to open input file:&#8221;</p>
<p>I am completely lost to what is causing this error, any help would be much appreciated!</p>
<p>Thanks!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-225">
		<div id="comment-225">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/cc0caf565a7aeee3e3caf6198945de39?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Arifcsecu(Bangladesh)</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-225">
				January 26, 2010 at 8:41 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thanks Boss Reron.<br />
i have got more than 1000 errors here.</p>
<p>Now this works fine.</p>
<p>Again thank you.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-226">
		<div id="comment-226">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/059c798e2ab4aa236e721fd49d675fd3?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Loz</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-226">
				February 4, 2010 at 5:10 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I cant get this to work <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_sad.gif" alt=":(" class="wp-smiley" /></p>
<p>&#060;?php echo $s3â€&#062;getAuthenticatedURL(&#8220;evp-4b69f2e172842-e7015e5af93fdd8e3157715cb3c112db&#8221;, &#8220;video.mp4&#8243;, 120); ?&#062;</p>
<p>spits out this error</p>
<p>Fatal error: Call to undefined function getAuthenticatedURL()</p>
<p>any help appreciated.</p>
<p>I used the firefox S3 plugin, and set EVERYONE to NO, and authenticated users to YES</p>
<p>I dont understand whats going on here <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_sad.gif" alt=":(" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-227">
		<div id="comment-227">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-227">
				February 4, 2010 at 11:15 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Loz: did you require(&#8216;S3.php&#8217;); at the top of your PHP code?  Did you properly initialize the $s3 variable by creating an instance of the S3 class?</p>
<p>If you&#8217;re trying to use it statically, you need to set the S3 access key and secret key with the appropriate static method, and access it via S3::methodname() rather than with a variable.</p>
<p>I can give you more help, but you&#8217;ll have to show more of your code than just one line.  Feel free to e-mail me at <a href="mailto:heron@xnapid.com">heron@xnapid.com</a> if you need more help.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-228">
		<div id="comment-228">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/08ae85f663496b2665f0ad2fd16c424c?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">jbq</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-228">
				February 4, 2010 at 1:58 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I created a bucket with s3cmd with both lower and uppercase chars, and when using your class I kept getting the following error until I removed the strtolower($bucket) call in the S3Request constructor: S3::putObject(): [NoSuchBucket] The specified bucket does not exist</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-229">
		<div id="comment-229">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/08ae85f663496b2665f0ad2fd16c424c?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">jbq</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-229">
				February 4, 2010 at 2:16 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>OK I understand now, I have to call putObject() with empty bucket name and rather have the bucket name included in the URI.  This way I don&#8217;t come across the problem and don&#8217;t get signature mismatch.  There must be a bug somewhere in the S3 class when bucket parameter is defined and &#8220;Host: mybucket.s3.amazonaws.com&#8221; is used</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-230">
		<div id="comment-230">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/059c798e2ab4aa236e721fd49d675fd3?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Loz</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-230">
				February 5, 2010 at 5:42 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi Heron</p>
<p>Thanks for replying.</p>
<p>yes, this is the code I used at the top of my php page.</p>
<p>XXXX = my amazon key stuff.</p>
<p>&#060;?php<br />
$S3AWSID=&#8217;XXXXXXXXXX';<br />
$S3AWSSECRET=&#8217;XXXXXX';<br />
require_once &#8216;S3.php';<br />
$s3 = new S3(&#8220;$S3AWSID&#8221;, &#8220;$S3AWSSECRET&#8221;);<br />
?&#062;</p>
<p>This is the ebook I followed.</p>
<p><a href="http://www.ask-me-about.com/Securing-Files-on-S3.pdf" rel="nofollow">http://www.ask-me-about.com/Securing-Files-on-S3.pdf</a></p>
<p>The S3.php page is in the same directory as that of the php file that contains that information at the top of the page.</p>
<p>Thanks for your email, i will send you a note shortly.</p>
<p>Cheers</p>
<p>Loz</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-231">
		<div id="comment-231">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/e2b8a2a227448f27a88e446dea19d84e?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">chandrav</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-231">
				February 9, 2010 at 4:27 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>if the bucket name has &#8220;/&#8221; in it it does not create recursive directory. </p>
<p>say you want to create a director test2 in test. </p>
<p>$handle-&#062;putBucket(&#8220;test/test2&#8243;, &#8216;public-read&#8217;);</p>
<p>this gives me an error. </p>
<p>Is there a way to do this?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-232">
		<div id="comment-232">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-232">
				February 9, 2010 at 9:59 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>chandrav,</p>
<p>There&#8217;s no such thing as a &#8216;folder&#8217; or &#8216;directory&#8217; in S3 buckets.  If you want to simulate directories, you need to prefix your object names with the virtual directory name.  For example, suppose you want to pretend there&#8217;s a folder named &#8220;test&#8221;.  What you need to do is to name all of the objects that go in that folder such that they begin with &#8220;test/&#8221;.  So if &#8220;foobar.html&#8221; goes in the &#8220;test&#8221; folder, you&#8217;d put it in your S3 bucket with the name &#8220;test/foobar.html&#8221;.</p>
<p>Again, S3 has no concept of folders or directories.  S3Fox and tools like it simply pretend there are folders, based on filename prefixes.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-233">
		<div id="comment-233">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/4afc5fe500a7a35972bce88028d60868?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Scott</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-233">
				February 11, 2010 at 3:59 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I seem to be bumping into the same SSL problem everyone else. I&#8217;m running tests on a local XAMPP install- I can upload files just fine and verified them via S3Fox. However, any attempt to list buckets or put buckets or do anything else drops the following error:</p>
<p>Warning: S3::listBuckets(): [60] SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed in C:xampphtdocsS3NativeS3.php on line 91</p>
<p>I tried setting $useSSL=false in the constructor, but it didn&#8217;t change anything. Ideas?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-234">
		<div id="comment-234">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/116cb6a47c79c94688c98d80e710c5af?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">ian</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-234">
				February 13, 2010 at 1:44 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Scott:</p>
<p>For a workaround, edit the S3 class, and go to ~ line 1222.</p>
<p>You have to disable Peer Verification (replace 1, with 0), in this line:</p>
<p>curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 1);</p>
<p>Hope this helps.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-235">
		<div id="comment-235">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/cb743767148c3468b6a0b36078b9cd68?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Andrew Slater</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-235">
				February 13, 2010 at 2:21 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Same SSL3 etc problem &#8212; this is new as of yesterday for me.  Nothing changed on my end, so I&#8217;m guessing that maybe something changed on Amazon&#8217;s end that we need to change in the code?</p>
<p>Andrew</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-236">
		<div id="comment-236">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/cb743767148c3468b6a0b36078b9cd68?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Andrew Slater</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-236">
				February 13, 2010 at 2:26 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@ian &#8212; that did it.  Looks like I came to the site here about 40 seconds too early!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-237">
		<div id="comment-237">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b063188bb74d09d9d4d705dd740ee8cc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">a.yamanoi</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-237">
				February 24, 2010 at 2:50 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thanks for a great class!</p>
<p>In the copyObject(&#8230;) function,<br />
&#8230;<br />
-$rest-&#062;setAmzHeader(&#8216;x-amz-copy-source&#8217;, sprintf(&#8216;/%s/%s&#8217;, $srcBucket, $srcUri));<br />
+$rest-&#062;setAmzHeader(&#8216;x-amz-copy-source&#8217;, sprintf(&#8216;/%s/%s&#8217;, $srcBucket, rawurlencode($srcUri)));<br />
&#8230;</p>
<p>I use above code for multibyte filenames.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-238">
		<div id="comment-238">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/ed5283df3d2f437b63dc31519d30af6d?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">mconnors</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-238">
				February 27, 2010 at 7:38 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I could really use some help. After having a massive directory tree of a million files uploaded to a bucket with AWS import, I can&#8217;t see any folders with anything other than cyberduck or s3fox. All other attempts won&#8217;t show the folders including this class. Any ideas?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-239">
		<div id="comment-239">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/ba1332bd2c43827052b471ac62a5c3bb?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">rvera10</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-239">
				March 1, 2010 at 4:41 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I&#8217;m new to php and was wondering if I could get some help in how to get a file from s3 back to the browser.  I believe I need to use the getObject(&#8216;bucketname&#8217;, &#8216;uri&#8217;) function.  But I do not want to save it to the server and then open it open to flush it out to the browser.  I would like to take the return Object or Reference to what&#8217;s being returned in the getObject and probably use something like fpassthru().  But not sure if this is the correct way to do this.</p>
<p>Any help will be greatly appreciated.</p>
<p>Thanks in advance.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-240">
		<div id="comment-240">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-240">
				March 2, 2010 at 4:12 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>rvera10,</p>
<p>If you want the file on S3 to be the only thing passed to the user, you could simply redirect them to the URL of the object on S3 (perhaps using an authenticated URL if it&#8217;s a private file).</p>
<p>If you want the file embedded in other output, though, well it depends.  If it&#8217;s an image, then again you can use the URL straight to the S3 object as the image&#8217;s URL in the HTML output.  If it&#8217;s a text file, then S3 isn&#8217;t really a good place to store it.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-241">
		<div id="comment-241">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-241">
				March 2, 2010 at 4:18 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>mconnors,</p>
<p>That sounds like something you should contact the S3 team about (try the forums at aws.amazon.com).  I don&#8217;t know why that might be happening.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-242">
		<div id="comment-242">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/7c1ff10d3a5a1e5e8cf16f3d7a1c2f62?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://toddish.co.uk' rel='external nofollow' class='url'>Todd</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-242">
				March 2, 2010 at 5:47 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Finally needed to look into S3, and this class has saved me a lot of time.  Thanks!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-243">
		<div id="comment-243">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/7928e1ed94252a85db1d67b0d9b919c3?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Gnome</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-243">
				March 4, 2010 at 12:37 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>S3 versioning please.<br />
v0.4.0 is very old.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-244">
		<div id="comment-244">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/32b4b6baef737afb645cf58f2b57e852?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">pawan kumar</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-244">
				April 19, 2010 at 12:25 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hello Sir</p>
<p>This script work fine for small files. but when i upload large file e.g. 80MB,  The file is moved to s3 ok but PHP gives up waiting to and so does not execute the rest of the code.Can any one provide me the solution for this ?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-245">
		<div id="comment-245">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/151e36cc7f789a4790c8ca437e3a1f60?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.coderchris.com' rel='external nofollow' class='url'>Chris Dean</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-245">
				April 27, 2010 at 9:36 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Just seen this and admit I&#8217;ve not read anything about it fully yet, but I was thinking of building a kohana module around cloudfusion (<a href="http://getcloudfusion.com/" rel="nofollow">http://getcloudfusion.com/</a>) to do something similar&#8230;</p>
<p>Not sure if it&#8217;d be of benefit to you to investigate cloudfusion integration for this project?</p>
<p>Chris</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-246">
		<div id="comment-246">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/c2c8a13036c02b276223473f3619f4db?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">RJ</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-246">
				May 10, 2010 at 1:10 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Is there a way by which i can generate url for files to be downloaded directly&#8230;..currently the url generated through getAuthenticatedUrl opens the image in d clients browser&#8230;i want it to be downloaded&#8230;..</p>
<p>Thanks</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-247">
		<div id="comment-247">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/1b2b43a0a5760aab02dd723c1a09e24b?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">John H.</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-247">
				June 1, 2010 at 3:53 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Is there a way we can just list folders in a bucket? I am having a hard time figuring that out.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-248">
		<div id="comment-248">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/119a4e255277db4b9b8c2c0aa88a5a36?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Andrew</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-248">
				June 5, 2010 at 2:28 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi there,<br />
great class &#8211; however I can&#8217;t test it and I think it is a problem that I ran my server localy via MAMP PRO and a special port on my Mac. The class creation doesn&#8217;t work and the page loads endless without any error message.</p>
<p>Can anyone share a tip what this could be!</p>
<p>Thanks a lot for any help!<br />
Andrew</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-249">
		<div id="comment-249">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/119a4e255277db4b9b8c2c0aa88a5a36?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Andrew</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-249">
				June 5, 2010 at 3:04 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Problem solved &#8211; my Mac didn&#8217;t allow the outbound call to S3 Server <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-250">
		<div id="comment-250">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/758fce6d6a550aea7b9b3e8971e86bc9?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Terenn</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-250">
				June 11, 2010 at 12:48 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thank you very much!</p>
<p>EDIT: &#8220;Your comment looks like it could be spam.<br />
Please try altering your input.&#8221;</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-251">
		<div id="comment-251">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/800db2c62d011cecbc8eb7201ba74aa6?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Frank Koehl</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-251">
				June 14, 2010 at 7:49 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Just wanted to ping this post, make sure that development on this class wasn&#8217;t dead. Has the Amazon API simply stabilized?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-252">
		<div id="comment-252">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/8ceb646bcd6be69592a0650a66e1185b?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.emarketsouth.com/' rel='external nofollow' class='url'>Ty Wangsness</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-252">
				June 18, 2010 at 8:24 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I was having a hard time getting this class to let me create buckets in the US West or Asia Pacific regions.  The location string for US West is &#8220;us-west-1&#8243; and the location string for Asia Pacific is &#8220;ap-southeast-1&#8243;. Then you have to edit one line in this class due to Amazon being case sensitive:</p>
<p>Line 213:<br />
$locationConstraint = $dom-&#062;createElement(&#8216;LocationConstraint&#8217;, strtoupper($location));</p>
<p>becomes:</p>
<p>$locationConstraint = $dom-&#062;createElement(&#8216;LocationConstraint&#8217;, $location);</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-253">
		<div id="comment-253">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/fc5bbea706b56013f918c2b3e6a37793?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.orderingdisorder.com' rel='external nofollow' class='url'>Heron</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-253">
				June 18, 2010 at 9:54 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Frank Koehl: The API has not changed very much at all since the last update, with the exception of S3&#8217;s recently released RRS feature.  If there&#8217;s a big demand for it I&#8217;ll pester Don to update the code <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_wink.gif" alt=";)" class="wp-smiley" /></p>
<p>The code as it stands is quite stable and easy to use.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-254">
		<div id="comment-254">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/a02be3d25177abacda1768e6d3f56cf8?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://agentile.com' rel='external nofollow' class='url'>Anthony Gentile</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-254">
				July 9, 2010 at 5:43 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Just wanted to say thanks for this class and also curious as to if you have plans to update it to manage the recent bucket policy additions to S3. Thanks again.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-255">
		<div id="comment-255">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/6a386f41bb397d1594b1d8b640162615?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">vinod</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-255">
				July 28, 2010 at 1:12 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hey Bro Thank you very much, among the libraries out there I think yours is the best. Its simple and has nice documentation and example good enough for me&#8230;</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-256">
		<div id="comment-256">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f57e2cfc69e45b9b29eb700546c69ba2?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Anoop</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-256">
				August 12, 2010 at 6:45 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi,</p>
<p>I have to transfer my files from amazon s3 to my new sever . My bucket has large number of images and videos. Is it possible to transfer all my files to my new server  using php script ? </p>
<p>Thanks in Advance,</p>
<p>Anoop</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-257">
		<div id="comment-257">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f72c49fbd581dd07c090c45deb358182?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Bruce</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-257">
				August 23, 2010 at 4:05 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>When I pass a short string to putObject it takes minutes to complete.  The same data passed in a file completes immediately.</p>
<p>Slow:<br />
$data = &#8220;0123456789n&#8221;;<br />
$put = $s3-&#062;putObject($data, $bucket, $path, S3::ACL_PUBLIC_READ);</p>
<p>Fast:<br />
$data = $s3-&#062;inputFile(&#8220;file.txt&#8221;);<br />
$put = $s3-&#062;putObject($data, $bucket, $path, S3::ACL_PUBLIC_READ);</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-258">
		<div id="comment-258">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/71aa36b57e3f91609975d997fb751912?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Andris</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-258">
				August 28, 2010 at 9:45 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>If ther&#8217;s a backslash in the path of an object (not a slash which separates folders) then copyObject fails with &#8221; The request signature we calculated does not match the signature you provided.&#8221;. A minor problem, and I&#8217;m looking into fixing it, but if anyone has a suggetion&#8230; Thanks.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-259">
		<div id="comment-259">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/71aa36b57e3f91609975d997fb751912?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Andris</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-259">
				August 28, 2010 at 11:00 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I found the solution&#8230; You have to urlencode() the object&#8217;s name</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-260">
		<div id="comment-260">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/847de8d1f5f0c8dda1540c385cd6632b?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Jaka</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-260">
				September 13, 2010 at 11:23 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>This is really poorly designed.</p>
<p>All the objects share a single pair of credentials. They don&#8217;t behave as you would expect objects to behave at all.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-261">
		<div id="comment-261">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5bd0bf9fad5582c8ab057a2cfcaf7491?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://undesigned.org.za/' rel='external nofollow' class='url'>Don</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-261">
				September 14, 2010 at 12:58 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Jaka, </p>
<p>Yes &#8211; I&#8217;m busy with a rewrite that will.  But if you don&#8217;t like it, use something else <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":-)" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-262">
		<div id="comment-262">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b96c7f5287a5772d70e21026b418bbb0?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">vince</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-262">
				September 22, 2010 at 1:15 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I like the profuseness of the comments.</p>
<p>But,<br />
it seems that this class doesn&#8217;t support bucket names with capital letters, even though S3 will treat two buckets such as &#8216;SomeBucket&#8217; and &#8216;somebucket&#8217; as distinct, and will let them coexist as separate entities.</p>
<p>If a user tries something like $s3-&#062;putBucket(&#8216;SomeBucket&#8217;);<br />
    a bucket with a name of &#8216;somebucket&#8217; will created in S3.</p>
<p>If a user has created a bucket with a name of &#8216;SomeBucket&#8217; via some other means (like the AWS Management Console), it will be inaccessible with this class.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-263">
		<div id="comment-263">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/14f83a6030520846f471fa1364e1b5c9?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">aaron francis</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-263">
				September 23, 2010 at 7:32 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>First off, thanks so much for this class. Works like a dream.</p>
<p>Quick question though, every time I try to use the prefix option on getBucket I get a SignatureDoesNotMatch error. </p>
<p>$contents = $s3-&#062;getBucket(&#8220;bucket&#8221;) &#8211; works<br />
$contents = $s3-&#062;getBucket(&#8220;bucket&#8221;, &#8220;a&#8221;); &#8211; error</p>
<p><code><span class="source-html">Warning:&#160;S3::getBucket():&#160;[SignatureDoesNotMatch]&#160;The&#160;request&#160;signature&#160;we&#160;calculated&#160;does&#160;not&#160;match&#160;the&#160;signature&#160;you&#160;provided.&#160;Check&#160;your&#160;key&#160;and&#160;signing&#160;method.&#160;in&#160;/Applications/MAMP/htdocs/assets/classes/S3.class.php&#160;on&#160;line&#160;126</span></code></p>
<p>I&#8217;ve tried urlencoding different things and also sorting headers lexicographically. I just can&#8217;t seem to get it down. Any ideas?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment even depth-2" id="li-comment-306">
		<div id="comment-306">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f420af397dee9fca5ec35ecebb4278e4?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Peter</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-306">
				October 13, 2011 at 7:55 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hey aaron francis,</p>
<p>I had the same problem. Googled for a bit but could not find an answer. My problem was that my bucket name was &#8220;SomeBucket&#8221;. When I changed it to &#8220;somebucket&#8221; everything worked!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-264">
		<div id="comment-264">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/e89c85cc43acbcd9d40d00ca280571ef?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://qvaq.com' rel='external nofollow' class='url'>Martin Lindkvist</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-264">
				September 30, 2010 at 2:25 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>This class is awesome, use it all the time.</p>
<p>It would be great if it was updated with the invalidation and default-object features amazon has added lately.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-265">
		<div id="comment-265">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/4c921f8866878cd38164c99fd08cc3c4?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Morne</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-265">
				November 25, 2010 at 10:29 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi there, how can I bulk upload files in a directory to my s3 bucket?</p>
<p>Can I just get all file names from the directory and put it in to an array, then use the putObject() to upload?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-266">
		<div id="comment-266">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/537255cb0c03eb9e83dc23877f7c8fce?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">RubÃ©n MartÃ­nez</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-266">
				December 27, 2010 at 6:13 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Sorry, but the site documentation doesn&#8217;t explain this clearly, so I hope you can excuse my ignorance.</p>
<p>I&#8217;m testing using S3 as a remote backup for critical files on a PHP application. I&#8217;m developing in Wamp (Win XP). When I try to run your example.php sample, I got the [60] error about no certificates. </p>
<p>I want to use SSL, so I&#8217;ve downloaded the cert &#038; key generated by the Amazon control panel (cert-****.pem &#038; pk-****.pem), and then add the instructions to getResponse():</p>
<p>if (S3::$useSSL) {<br />
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 2);<br />
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 1);</p>
<p>// New lines<br />
// Certificate &#038; key file in pem format<br />
curl_setopt($curl, CURLOPT_SSLCERT, S3::$certFile);<br />
curl_setopt($curl, CURLOPT_SSLKEY, S3::$pkeyFile);<br />
// End new lines<br />
}	</p>
<p>but the error persists.</p>
<p>On the other side, downloading a Certificates bundle from the curl site and adding the next line instead works:</p>
<p>// CA bundle file<br />
curl_setopt($curl, CURLOPT_CAINFO, &#8220;C:wampwwws3certscacert.pem&#8221;);</p>
<p>I think that the certificate is obtained automatically and verified against a root certificate present in the bundle, so it works. Still, why wasn&#8217;t  the first option successful? </p>
<p>Shouldn&#8217;t CURLOPT_SSLCERT bean an inmediate aceptance? Or are those certificates mean&#8217;t for other things, and the ssl is using the generic amazon certificate for *.s3.amazonaws.com. </p>
<p>That would explain why it worked like that, and yet, what are the those cert and key for?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-267">
		<div id="comment-267">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/c85591544b1a7f287e59093bbfe1518e?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">chylvina</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-267">
				January 19, 2011 at 5:13 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>It&#8217;s great.Thank you very much!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-268">
		<div id="comment-268">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/7d7424a173dd8fed2a9b9e5c598e51d9?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.opednews.com' rel='external nofollow' class='url'>Burton Smith</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-268">
				February 19, 2011 at 1:30 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thank you so much for this class.</p>
<p>I don&#8217;t know how I could have ever fulfilled my client&#8217;s expectations for backup to S3 unless I had a pre-written class.</p>
<p>Much Gratitude!</p>
<p>&#8230;Burton</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-269">
		<div id="comment-269">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/4023c74da5b68e9b17af02329e2c4fbc?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Stefan</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-269">
				February 27, 2011 at 10:32 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi all!</p>
<p>Im&#8217; new to S3.<br />
Please let me ask a stupid question.<br />
This class seems to exist quite a long time now.<br />
Perhaps it was written at a time when Amazon had no PHP API?</p>
<p>Why don&#8217;t you all use the Amazon PHP API?<br />
(<a href="http://aws.amazon.com/sdkforphp/" rel="nofollow">http://aws.amazon.com/sdkforphp/</a>)</p>
<p>Is it not as easy to use as this one?</p>
<p>Thanks for your coments!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-270">
		<div id="comment-270">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/8d870f414d0a3282e8eb22d4a3d8ca16?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Mike</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-270">
				March 2, 2011 at 9:25 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>@Stefan:<br />
To me the original Amazon PHP SDK seems too bloated. And it&#8217;s autoloader conflictet with that of my framework. So why use such a beast if there&#8217;s a lean class like this?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-271">
		<div id="comment-271">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f79489c0267a9ed6dca4a42fc1efa7fd?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.jimwestergren.com' rel='external nofollow' class='url'>Jim Westergren</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-271">
				March 3, 2011 at 12:13 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thanks a lot for this.</p>
<p>However I found that the Content-Type would not be set correctly. I tried various things and couldn&#8217;t figure it out then decided to make some changes in the class:</p>
<p>In your function function putObject I added this line:</p>
<p><code><span class="source-html">&#060;span class="source-variable"&#062;$input</span>['type']&#160;=&#160;self::getMimeType_new_from_jim(&#060;span class="source-variable"&#062;$uri);</code></p>
<p>Just before this line:</p>
<p><code><span class="source-html">if&#160;(!isset(&#060;span class="source-variable"&#062;$input</span>['type']))&#160;{</code></p>
<p>Then at the bottom just before the final } I added this:</p>
<p><code><span class="source-html">public&#160;static&#160;function&#160;getMimeType_new_from_jim(&#060;span class="source-variable"&#062;$file</span>)&#160;{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;static&#160;&#060;span class="source-variable"&#062;$exts&#160;=&#160;array(<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'jpg'&#160;=&#062;&#160;'image/jpeg',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'gif'&#160;=&#062;&#160;'image/gif',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'png'&#160;=&#062;&#160;'image/png',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'tif'&#160;=&#062;&#160;'image/tiff',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'tiff'&#160;=&#062;&#160;'image/tiff',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'ico'&#160;=&#062;&#160;'image/x-icon',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'swf'&#160;=&#062;&#160;'application/x-shockwave-flash',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'pdf'&#160;=&#062;&#160;'application/pdf',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'zip'&#160;=&#062;&#160;'application/zip',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'gz'&#160;=&#062;&#160;'application/x-gzip',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'tar'&#160;=&#062;&#160;'application/x-tar',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'bz'&#160;=&#062;&#160;'application/x-bzip',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'bz2'&#160;=&#062;&#160;'application/x-bzip2',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'txt'&#160;=&#062;&#160;'text/plain',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'asc'&#160;=&#062;&#160;'text/plain',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'htm'&#160;=&#062;&#160;'text/html',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'html'&#160;=&#062;&#160;'text/html',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'css'&#160;=&#062;&#160;'text/css',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'js'&#160;=&#062;&#160;'text/javascript',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'xml'&#160;=&#062;&#160;'text/xml',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'xsl'&#160;=&#062;&#160;'application/xsl+xml',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'ogg'&#160;=&#062;&#160;'application/ogg',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'mp3'&#160;=&#062;&#160;'audio/mpeg',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'wav'&#160;=&#062;&#160;'audio/x-wav',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'avi'&#160;=&#062;&#160;'video/x-msvideo',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'mpg'&#160;=&#062;&#160;'video/mpeg',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'mpeg'&#160;=&#062;&#160;'video/mpeg',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'mov'&#160;=&#062;&#160;'video/quicktime',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'flv'&#160;=&#062;&#160;'video/x-flv',<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;'php'&#160;=&#062;&#160;'text/x-php'<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#060;span class="source-variable"&#062;$ext&#160;=&#160;split("[/\.]",&#160;&#060;span class="source-variable"&#062;$file)&#160;;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#060;span class="source-variable"&#062;$n&#160;=&#160;count(&#060;span class="source-variable"&#062;$ext)-1;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#060;span class="source-variable"&#062;$ext&#160;=&#160;&#060;span class="source-variable"&#062;$ext[&#060;span class="source-variable"&#062;$n];&#160;//&#160;&#060;span class="source-variable"&#062;$ext&#160;is&#160;now&#160;the&#160;file&#160;extension<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if&#160;(isset(&#060;span class="source-variable"&#062;$exts[&#060;span class="source-variable"&#062;$ext]))&#160;{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return&#160;&#060;span class="source-variable"&#062;$exts[&#060;span class="source-variable"&#062;$ext];<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}&#160;else&#160;{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return&#160;'application/octet-stream';<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br />&#160;&#160;&#160;&#160;}</code></p>
<p>It works well for me. I release the above code to the public domain free for all to use.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-272">
		<div id="comment-272">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/9375578eac3e4d8f8a4a75e151a01e17?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Mind</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-272">
				March 16, 2011 at 2:20 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>i get this error today after many month i use backup:</p>
<p>PHP Warning:  S3::listBuckets(): [6] Couldn&#8217;t resolve host &#8216;s3.amazonaws.com&#8217; in S3.php on line 90</p>
<p>i can&#8217;t understand why&#8230;can u help me?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-273">
		<div id="comment-273">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/7984b502982905091b957e0790a2754d?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://desaya.com' rel='external nofollow' class='url'>Hans Malkow</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-273">
				March 21, 2011 at 4:12 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thank your for your really helpful class &#8211; it works great!</p>
<p>@Mind: If you are located in Europe, you should try &#8220;s3-external-3.amazonaws.com&#8221; instead of &#8220;s3.amazonaws.com&#8221;</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-274">
		<div id="comment-274">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/3ff5bfbeac112376e27a3791d42f341e?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">jonkraftsmall</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-274">
				April 13, 2011 at 4:34 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thanks for info</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-275">
		<div id="comment-275">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/43e83407cdcaf61279ca4625f5400594?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Michael</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-275">
				April 23, 2011 at 12:11 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thank you.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-276">
		<div id="comment-276">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/36b081455c7b31467b9b63e463142acf?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Dave</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-276">
				April 25, 2011 at 11:39 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi am am fairly new to PHP and I am trying to generate a temporary autheticated URL for Amazon S3, using your S3 PHP class and the method below suggested by Wilson Mattos, but I keep getting:</p>
<p>Fatal error: Call to undefined function add_action() in F:wampwwwtestS3.php on line 50</p>
<p>Any clue to what I may be doing wrong? And thank you for your time and effort in developing this.</p>
<p>&#060;?php<br />
$S3AWSID=&#8217;ACCESS_KEY_ID';<br />
$S3AWSSECRET=&#8217;SECRET_ACCESS_KEY';<br />
require_once &#8216;S3.php';<br />
$s3 = new S3(&#8220;$S3AWSID&#8221;, &#8220;$S3AWSSECRET&#8221;);<br />
?&#062;</p>
<p>&#060;?php echo $s3â€&#062;getAuthenticatedURL(&#8220;BUCKET&#8221;, &#8220;FILE&#8221;, EXPIRE_TIME); ?&#062;</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-277">
		<div id="comment-277">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/0bfd148fde99baea27dd55ba522be2b6?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Jeff Harden</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-277">
				April 26, 2011 at 9:05 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi,</p>
<p>Firstly excellent Class, worked first time, so thankyou very much!</p>
<p>I am having a issue (that i dont think is due to the class) with intermittent connection problems and was wondering whether anybody experienced this?</p>
<p>I get the Warning:</p>
<p>PHP Warning:  S3::putObject(): [7] couldn&#8217;t connect to host in /libraries/S3/S3.php on line 358</p>
<p>As said this doesnt happen all the time, it seems to be random, does anyone have any ideas? I would have thought that S3 was highly available so the cant connect to host doesnt really make sense!</p>
<p>Thanks,</p>
<p>Jeff</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-278">
		<div id="comment-278">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/edcc6d8e063878ac695c325d7a4baf95?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Richard Soares</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-278">
				April 28, 2011 at 8:57 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Thoughts on why S3 Keys are not authenticating. Getting this error back from S3:  [InvalidAccessKeyId] The AWS Access Key Id you provided does not exist in our records.</p>
<p>Overview: Added the s3.php class into CodeIgniter Libraries and modified all instance of class name to My_S3. Class seems to be working. When calling any function in teh class I get the above Access Key warning. Sample code below:</p>
<p>$s3 = new S3( AMZ_AWS_ACCESS_KEY, AMZ_AWS_SECRET_KEY );<br />
$bucket_list = $this-&#062;s3-&#062;listBuckets( true );</p>
<p>Verified the Access Key and Secret Key are working using other tools such as Panic Transmit S3 protocol and SFox for FireFox.</p>
<p>Using SC Class 0.4.0 &#8211; $Id: S3.php 47 2009-07-20 01:25:40Z don.schonknecht $</p>
<p>Where should I look for the bug?</p>
<p>Thanks Richard</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment even depth-2" id="li-comment-303">
		<div id="comment-303">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/ed975b8c24f017cf3bb73dc638b64b1a?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Anil Singh</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-303">
				September 23, 2011 at 4:13 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Richard,</p>
<p>How did you resolve this issue? I am getting the same error and have not been able to move forward. Any pointer will be appreciated.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-279">
		<div id="comment-279">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/edcc6d8e063878ac695c325d7a4baf95?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Richard Soares</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-279">
				April 28, 2011 at 9:16 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Code Igniter / S3.php Library bug FIXED:</p>
<p>The fix to my previous post on 28th Apr 2011 is as follows:</p>
<p>Change:<br />
$s3 = new S3( AMZ_AWS_ACCESS_KEY, AMZ_AWS_SECRET_KEY );<br />
To:<br />
$this-&#062;s3-&#062;S3( AMZ_AWS_ACCESS_KEY, AMZ_AWS_SECRET_KEY );</p>
<p>Reason:<br />
When CI Library classes extend tot he core CI_Controller class.</p>
<p>Hope this saves someone time.</p>
<p>Richard</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-280">
		<div id="comment-280">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/312db3e47d8e0b2cb5535850a9078d40?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Roman</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-280">
				April 29, 2011 at 9:32 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi!</p>
<p>There&#8217;s bug in getBucket() method.<br />
If 0 is passed to this method as @maxKeys parameter, do while loop will circle until memory_limit or max_execution_time is reached.</p>
<p>This is how we fix it:<br />
public static function getBucket($bucket, $prefix = null, $marker = null, $maxKeys = null, $delimiter = null, $returnCommonPrefixes = false) {<br />
                if ($maxKeys == 0) return true;</p>
<p>Cheers!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-281">
		<div id="comment-281">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/3c8339284da19f88527d777e42f3cf5a?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.klassennetz.de' rel='external nofollow' class='url'>greg</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-281">
				May 5, 2011 at 11:16 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>A cheap hack for everyone trying to get reduced redundancy  to work:</p>
<p>Insert:<br />
$rest-&#062;setAmzHeader(&#8216;x-amz-storage-class&#8217; , &#8216;REDUCED_REDUNDANCY&#8217;);<br />
below the<br />
$rest-&#062;setAmzHeader(&#8216;x-amz-acl&#8217;, $acl);<br />
in the bottom of the putObject function</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-admin bypostauthor even depth-2" id="li-comment-289">
		<div id="comment-289">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/9ef858af454375944d635f816795410f?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Don</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-289">
				June 20, 2011 at 5:25 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>An (undocumented) RRS option for putObject() is available in the dev branch on github.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-282">
		<div id="comment-282">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/6ccafc24c65f129ba40b38910bd255e4?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://digcms.com' rel='external nofollow' class='url'>John</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-282">
				May 17, 2011 at 9:05 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>this is really great script. Thanks webmaster.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-283">
		<div id="comment-283">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/808a793eb50b9544b5ad2b775420feff?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://oscaralderete.com' rel='external nofollow' class='url'>Oscar</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-283">
				May 17, 2011 at 5:26 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>This is a great class!<br />
Very useful to me and my requirements, thanks to share it!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-284">
		<div id="comment-284">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/d21e8b1c03df2964555618fe37ee2455?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Mike</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-284">
				May 24, 2011 at 10:23 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Great work thank you.<br />
Can i get all the folder names inside the bucket and also all the files inside particular folder.<br />
I have tried to use getBucket() method with prefix option, But could not succeed.<br />
$contents = $s3-&#062;getBucket(&#8216;bucketName&#8217;,, &#8216;this/folder&#8217;);</p>
<p>Please let me know.</p>
<p>Thanks,<br />
Mike</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-285">
		<div id="comment-285">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/d21e8b1c03df2964555618fe37ee2455?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Mike</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-285">
				May 25, 2011 at 8:30 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Did anyone get a chance to look into my comment.<br />
Please help. How to use prefix with getBucket method.<br />
contents = $s3-&#062;getBucket(&#8216;bucketName&#8217;, &#8216;this/folder&#8217;);<br />
Bucket location in S3: /bucketName/this/folder</p>
<p>Thanks,<br />
Mike</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-286">
		<div id="comment-286">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/f6c64984399d22c0df2c4b00c90668df?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn"><a href='http://www.webgateinternational.com' rel='external nofollow' class='url'>Derek Davidson</a></cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-286">
				May 30, 2011 at 12:47 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>This is a great bit of code, thank you.  The only slight issue I came across (as mentioned by some other respondents) was that bucket names get cast to lowercase meaning that it can never find an AWS bucket that uses mixed or all upper case.</p>
<p>But the code is great. Thanks for sharing!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-admin bypostauthor even depth-2" id="li-comment-288">
		<div id="comment-288">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/9ef858af454375944d635f816795410f?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Don</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-288">
				June 20, 2011 at 5:23 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>This was changed in the master branch&#8230;  According to the API docs bucket names were never meant to include uppercase characters, but for some reason it was allowed.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-287">
		<div id="comment-287">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/956898fa97cee66b6eaa4094a33056c1?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Lua</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-287">
				June 10, 2011 at 12:18 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hi,<br />
I have the same problem of Troy. Here the detail:</p>
<p><code><span class="source-html">A&#160;PHP&#160;Error&#160;was&#160;encountered</p>
<p>Severity:&#160;User&#160;Warning</p>
<p>Message:&#160;S3::putObject():&#160;[55]&#160;select/poll&#160;returned&#160;error</p>
<p>Filename:&#160;libraries/S3.php</p>
<p>Line&#160;Number:&#160;410<br />A&#160;PHP&#160;Error&#160;was&#160;encountered</span></code></p>
<p>This error appears randomly and now more and more often (the class has worked correctly for me for six moths).</p>
<p>I use ubuntu server 7.04, php 5.2.3 and the last class version. The uploaded files are about 70kb-700kb.</p>
<p>Any idea to solve my issue?</p>
<p>Ty in advance!!<br />
Lua.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment even depth-2" id="li-comment-290">
		<div id="comment-290">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/845f343c1d289a3ee6ea5140fef8a25b?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Ryan</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-290">
				July 5, 2011 at 10:58 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>I too am also getting this issue and am wondering how to solve it.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt depth-2" id="li-comment-292">
		<div id="comment-292">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/845f343c1d289a3ee6ea5140fef8a25b?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Ryan Zec</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-292">
				July 15, 2011 at 8:25 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Looks like updating curl itself might help, it help fix this issue for me at least</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-291">
		<div id="comment-291">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/cb2de190116be6add40449b1e2ad4748?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Matt Robinson</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-291">
				July 6, 2011 at 6:26 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Don, I just wanted to thank you for this. It Just Works™. Perfect!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-294">
		<div id="comment-294">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/2a23c9ee2dac81222141e5b06eb7e3e4?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Simon</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-294">
				August 31, 2011 at 3:54 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Brilliant &#8211; simple, easy to use, just works. Thanks!</p>
<p>I&#8217;m currently moving over 300,000 photos in the <a href="http://www.zoochat.com/" rel="nofollow">ZooChat</a> galleries from my web host to S3 using your class &#8211; works well.</p>
<p>I also wrote a simple HTML based file manager for S3 (as a vBulletin forum plugin!) again, using your class. Dead easy. </p>
<p>Thanks again.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-307">
		<div id="comment-307">
			<div class="comment-author vcard">
				<img alt='' src='http://0.gravatar.com/avatar/a4ec986c6b7171364faedea42dc61db5?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">ABCD</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-307">
				October 24, 2011 at 4:12 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>This class does not support using french characters. </p>
<p>When trying to copy from a folder called &#8220;Àbcdefg&#8221; I get an invalid signature error<br />
However, the same action from the folder &#8220;Abcdefg&#8221; and &#8220;abcdefg&#8221; work perfectly fine</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-admin bypostauthor odd alt depth-2" id="li-comment-310">
		<div id="comment-310">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/9ef858af454375944d635f816795410f?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Don</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-310">
				November 4, 2011 at 8:07 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Try using UTF-8.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-313">
		<div id="comment-313">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/dce220f2d197a84fdb218ae2c71cbbbe?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Chris</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-313">
				November 11, 2011 at 9:21 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>The class seems to be updated with some of the suggestions here. So downloading the latest version will do the job without the need for any modifications. I am glad i came across it,thank you so much.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-314">
		<div id="comment-314">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/b9070b8a0006cbb0878574d67a062a19?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Thomas Isaksen</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-314">
				November 24, 2011 at 12:07 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Hey Don, </p>
<p>Just wanted to thank you for this great code. It&#8217;s exactly what I need and nothing more. <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_smile.gif" alt=":-)" class="wp-smiley" /></p>
<p>Keep up the good work!</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-332">
		<div id="comment-332">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/5a85f6e181ab29ab136fdac62d914445?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Kanwaljit Singh Nagra</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-332">
				April 1, 2012 at 11:56 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>- Recently started learning about EC2 and S3.<br />
&#8211; I tried using the Amazon PHP SDK example, but had little luck.<br />
&#8211; This is so simple and did the trick perfectly! Thank you <img src="http://undesigned.org.za/wp-includes/images/smilies/icon_biggrin.gif" alt=":D" class="wp-smiley" /></p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-334">
		<div id="comment-334">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/15fffe19fdfecd86fdcdac9b5bd7a293?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Steve</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-334">
				April 5, 2012 at 7:47 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>This is great.  Does it support the multi-object delete capability that was announced late last year?</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: InternetPost.it Creare una galleria fotografica con il Cloud Storage di Hostingsolutions.it - parte 8 - InternetPost.it</p>
	</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: InternetPost.it Creare una galleria fotografica con il Cloud Storage di Hostingsolutions.it - parte 8 - InternetPost.it</p>
	</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: PHP顶级类库 &#8211; Linux Life Liux Study</p>
	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-457">
		<div id="comment-457">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/58abf6c3f28faa0d16cb58e23438b5a9?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">Wayne</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-457">
				June 24, 2013 at 8:39 AM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>Is this still being supported? i really like it an was wondering if you will ever add support for the if_object_exists:: function</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-admin bypostauthor odd alt depth-2" id="li-comment-460">
		<div id="comment-460">
			<div class="comment-author vcard">
				<img alt='' src='http://1.gravatar.com/avatar/9ef858af454375944d635f816795410f?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />				<cite class="fn">don</cite> <span class="says">says:</span>			</div><!-- .comment-author .vcard -->
			
			<div class="comment-meta commentmetadata"><a href="http://undesigned.org.za/2007/10/22/amazon-s3-php-class/#comment-460">
				June 25, 2013 at 10:24 PM</a>			</div><!-- .comment-meta .commentmetadata -->

			<div class="comment-body"><p>It is still alive and kicking &#8211; see the github page.  You should use getObjectInfo() which does a HEAD request.</p>
</div>

			<div class="reply">
							</div><!-- .reply -->
		</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
			</ol>


			<p class="nocomments">Comments are closed.</p>
	

		
</div><!-- #comments -->


			</div><!-- #content -->
		</div><!-- #container -->


		<div id="primary" class="widget-area" role="complementary">
			<ul class="xoxo">

<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
	<li><a href='http://undesigned.org.za/2011/07/'>July 2011</a></li>
	<li><a href='http://undesigned.org.za/2011/06/'>June 2011</a></li>
	<li><a href='http://undesigned.org.za/2009/08/'>August 2009</a></li>
	<li><a href='http://undesigned.org.za/2009/06/'>June 2009</a></li>
	<li><a href='http://undesigned.org.za/2009/02/'>February 2009</a></li>
	<li><a href='http://undesigned.org.za/2008/07/'>July 2008</a></li>
	<li><a href='http://undesigned.org.za/2008/03/'>March 2008</a></li>
	<li><a href='http://undesigned.org.za/2007/11/'>November 2007</a></li>
	<li><a href='http://undesigned.org.za/2007/10/'>October 2007</a></li>
		</ul>
</li>			</ul>
		</div><!-- #primary .widget-area -->

	</div><!-- #main -->

	<div id="footer" role="contentinfo">
		<div id="colophon">



			<div id="site-info">
				<a href="http://undesigned.org.za/" title="Undesigned" rel="home">
					Undesigned				</a>
			</div><!-- #site-info -->

			<div id="site-generator">
								<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress.</a>
			</div><!-- #site-generator -->

		</div><!-- #colophon -->
	</div><!-- #footer -->

</div><!-- #wrapper -->

<script type='text/javascript' src='http://undesigned.org.za/wp-includes/js/comment-reply.min.js?ver=4.1.1'></script>
</body>
</html>